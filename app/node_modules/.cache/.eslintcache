[{"/data/shared/repos/glygen-backend-datasetviewer/app/src/index.js":"1","/data/shared/repos/glygen-backend-datasetviewer/app/src/App.js":"2","/data/shared/repos/glygen-backend-datasetviewer/app/src/reportWebVitals.js":"3","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/record_list.jsx":"4","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/history_detail.jsx":"5","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/file_uploads.jsx":"6","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/history_list.jsx":"7","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/dataset_list.jsx":"8","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/dialogbox.jsx":"9","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/glycan_finder.jsx":"10","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/static_page.jsx":"11","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/loading_icon.jsx":"12","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/local_config.jsx":"13","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/footer.jsx":"14","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/header.jsx":"15","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/gsd.jsx":"16","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/dataset_page.jsx":"17","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/filter.jsx":"18","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/search_box.jsx":"19","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/table.jsx":"20","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/columns.jsx":"21","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/util.jsx":"22","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/form_editor.jsx":"23","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/dataset_search.jsx":"24"},{"size":586,"mtime":1681917509872,"results":"25","hashOfConfig":"26"},{"size":4585,"mtime":1705657061214,"results":"27","hashOfConfig":"26"},{"size":362,"mtime":1681917509878,"results":"28","hashOfConfig":"26"},{"size":436,"mtime":1691175732000,"results":"29","hashOfConfig":"26"},{"size":6027,"mtime":1692115003163,"results":"30","hashOfConfig":"26"},{"size":15864,"mtime":1691175732000,"results":"31","hashOfConfig":"26"},{"size":5067,"mtime":1692115003165,"results":"32","hashOfConfig":"26"},{"size":6279,"mtime":1692114992509,"results":"33","hashOfConfig":"26"},{"size":1249,"mtime":1691175732000,"results":"34","hashOfConfig":"26"},{"size":11458,"mtime":1691175732000,"results":"35","hashOfConfig":"26"},{"size":2901,"mtime":1691175732000,"results":"36","hashOfConfig":"26"},{"size":313,"mtime":1691175732000,"results":"37","hashOfConfig":"26"},{"size":1027,"mtime":1703800154403,"results":"38","hashOfConfig":"26"},{"size":1901,"mtime":1711886312501,"results":"39","hashOfConfig":"26"},{"size":2634,"mtime":1703800042399,"results":"40","hashOfConfig":"26"},{"size":5088,"mtime":1691175732000,"results":"41","hashOfConfig":"26"},{"size":11401,"mtime":1710589950962,"results":"42","hashOfConfig":"26"},{"size":2622,"mtime":1691175732000,"results":"43","hashOfConfig":"26"},{"size":1193,"mtime":1691175732000,"results":"44","hashOfConfig":"26"},{"size":836,"mtime":1703815608640,"results":"45","hashOfConfig":"26"},{"size":1923,"mtime":1701189313183,"results":"46","hashOfConfig":"26"},{"size":20373,"mtime":1696098371742,"results":"47","hashOfConfig":"26"},{"size":2473,"mtime":1691175732000,"results":"48","hashOfConfig":"26"},{"size":7349,"mtime":1705661685209,"results":"49","hashOfConfig":"26"},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1t39cvy",{"filePath":"52","messages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"54"},{"filePath":"55","messages":"56","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61"},{"filePath":"62","messages":"63","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64"},{"filePath":"65","messages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"67"},{"filePath":"68","messages":"69","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"70"},{"filePath":"71","messages":"72","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"75"},{"filePath":"76","messages":"77","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"78"},{"filePath":"79","messages":"80","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"81","messages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"83","messages":"84","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"85","messages":"86","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"87"},{"filePath":"88","messages":"89","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"90"},{"filePath":"91","messages":"92","errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"93"},{"filePath":"94","messages":"95","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"96"},{"filePath":"97","messages":"98","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"99","messages":"100","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"101"},{"filePath":"102","messages":"103","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"104","messages":"105","errorCount":0,"fatalErrorCount":0,"warningCount":33,"fixableErrorCount":0,"fixableWarningCount":0,"source":"106"},{"filePath":"107","messages":"108","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"109"},{"filePath":"110","messages":"111","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"112"},"/data/shared/repos/glygen-backend-datasetviewer/app/src/index.js",[],"/data/shared/repos/glygen-backend-datasetviewer/app/src/App.js",["113"],"import React, { Component } from \"react\";\nimport DatasetSearch from \"./components/dataset_search\";\nimport DatasetList from \"./components/dataset_list\";\nimport RecordList from \"./components/record_list\";\nimport StaticPage from \"./components/static_page\";\nimport HistoryList from \"./components/history_list\";\nimport HistoryDetail from \"./components/history_detail\";\nimport FileUploads from \"./components/file_uploads\";\nimport GlycanFinder from \"./components/glycan_finder\";\n\nimport Alertdialog from './components/dialogbox';\nimport Loadingicon from \"./components/loading_icon\";\nimport * as LocalConfig from \"./components/local_config\";\nimport \"./App.css\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Header from \"./components/header\";\nimport Footer from \"./components/footer\";\nimport Gsd from \"./components/gsd\";\n\n\n\n\nclass App extends Component {\n\n  state = {\n    dialog:{\n      status:false, \n      msg:\"\"\n    }\n  };\n\n\n\n  handleDialogClose = () => {\n    var tmpState = this.state;\n    tmpState.dialog.status = false;\n    this.setState(tmpState);\n  }\n\n  componentDidMount() {\n    var reqObj = {};\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_init;\n\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          var tmpState = this.state;\n          tmpState.response = result;\n          tmpState.isLoaded = true;\n          if (tmpState.response.status === 0){\n            tmpState.dialog.status = true;\n            tmpState.dialog.msg = tmpState.response.error;\n          }\n          this.setState(tmpState);\n          //console.log(\"Request:\",svcUrl);\n          console.log(\"Ajax response:\", result);\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n  }\n\n\n  render() {\n    \n    if (!(\"response\" in this.state)){\n      return <Loadingicon/>\n    }\n\n\n    var app_ver = process.env.REACT_APP_APP_VERSION;\n    var data_ver = this.state.response.record.dataversion;\n\n    //<div className=\"versioncn\">APP v-{app_ver} &nbsp; |&nbsp; Data v-{data_ver}</div>\n    \n    return (\n      <div>\n      <Alertdialog dialog={this.state.dialog} onClose={this.handleDialogClose}/>\n      <Header onSearch={this.handleSearch} onKeyPress={this.handleKeyPress} initObj={this.state.response.record}/>\n      <div className=\"versioncn\">Release {data_ver}</div>\n      <Router>\n        <Switch>\n        <Route\n            path=\"/gsd\"\n            render={(props) => (\n              <Gsd initObj={this.state.response.record}/>\n            )}\n          />\n          <Route\n            path=\"/glycan_finder\"\n            render={(props) => (\n              <GlycanFinder pageId={\"glycanfinder\"} initObj={this.state.response.record}/>\n            )}\n          />\n          <Route\n            path=\"/uploads\"\n            render={(props) => (\n              <FileUploads pageId={\"File Uploads\"} initObj={this.state.response.record}/>\n            )}\n          />\n          <Route\n            path=\"/history_list\"\n            render={(props) => (\n              <HistoryList pageId={\"History List\"}  initObj={this.state.response.record}/>\n            )}\n          />\n        <Route\n            exact\n            path=\"/results/:listId\"\n            render={(props) => (\n            <DatasetList  initObj={this.state.response.record} listId={props.match.params.listId}/>\n            )}\n          />\n        <Route\n            path=\"/:bcoId/:dataVersion/history\"\n            render={(props) => (\n              <HistoryDetail bcoId={props.match.params.bcoId} dataVersion={props.match.params.dataVersion}  initObj={this.state.response.record}/>\n            )}\n          />\n          <Route\n            path=\"/static/:pageId\"\n            render={(props) => (\n              <StaticPage pageId={props.match.params.pageId}  initObj={this.state.response.record}/>\n            )}\n        />\n        <Route\n            path=\"/:bcoId\"\n            render={(props) => (\n              <RecordList bcoId={props.match.params.bcoId} initObj={this.state.response.record}/>\n            )}\n        />\n        <Route\n            exact\n            path=\"/\"\n            render={(props) => (\n              <DatasetSearch  initObj={this.state.response.record}/>\n            )}\n          />\n        </Switch>\n      </Router>\n      <Footer initObj={this.state.response.record}/>\n      </div>\n    );\n\n    \n  }\n}\n\nexport default App;\n","/data/shared/repos/glygen-backend-datasetviewer/app/src/reportWebVitals.js",[],"/data/shared/repos/glygen-backend-datasetviewer/app/src/components/record_list.jsx",[],"/data/shared/repos/glygen-backend-datasetviewer/app/src/components/history_detail.jsx",["114","115"],"import React, { Component } from \"react\";\nimport Alertdialog from './dialogbox';\nimport Loadingicon from \"./loading_icon\";\nimport * as LocalConfig from \"./local_config\";\nimport { Link } from \"react-router-dom\";\nimport DoubleArrowOutlinedIcon from '@material-ui/icons/DoubleArrowOutlined';\nimport { Chart } from \"react-google-charts\";\n\nimport $ from \"jquery\";\n\n\nclass HistoryDetail extends Component {\n  \n  state = {\n    dialog:{\n      status:false, \n      msg:\"\"\n    }\n  };\n\n\n  handleDialogClose = () => {\n    var tmpState = this.state;\n    tmpState.dialog.status = false;\n    this.setState(tmpState);\n  }\n\n  componentDidMount() {\n\n    var reqObj = {\"bcoid\":this.props.bcoId, dataversion:this.props.dataVersion, doctype:\"pairs\"};\n    const requestOptions = { \n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_history_detail;\n\n\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          var tmpState = this.state;\n          tmpState.response = result;\n          tmpState.isLoaded = true;          \n          if (tmpState.response.status === 0){\n            tmpState.dialog.status = true;\n            tmpState.dialog.msg = tmpState.response.error;\n          }\n          this.setState(tmpState);\n          //console.log(\"Request:\",svcUrl);\n          console.log(\"Ajax response:\", result);\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n  }\n\n\n\n  render() {\n\n    if (!(\"response\" in this.state)){\n      return <Loadingicon/>\n    }\n\n    var recordObj = this.state.response.record;\n\n    return (\n      <div className=\"pagecn\">\n        <Alertdialog dialog={this.state.dialog} onClose={this.handleDialogClose}/>\n        <div className=\"leftblock\" style={{width:\"100%\", \n          margin:\"60px 0px 0px 0px\", \n          fontSize:\"17px\", borderBottom:\"1px solid #ccc\"}}>\n          <DoubleArrowOutlinedIcon style={{color:\"#2358C2\", fontSize:\"17px\" }}/>\n          &nbsp;\n          <Link to=\"/\" className=\"reglink\">HOME </Link> \n            &nbsp; / &nbsp;\n          <Link to={ \"/\" + this.props.bcoId + \"/\" + this.props.dataVersion +\"/history\"} className=\"reglink\">HISTORY DETAIL</Link> \n        </div>\n        <div className=\"leftblock\" style={{width:\"100%\", margin:\"40px 0px 0px 0px\"}}>\n            <div className=\"leftblock\"  style={{width:\"20%\", margin:\"0px 0px 0px 0px\"}}>\n                BCO ID<br/>\n                <input className=\"form-control\" style={{width:\"100%\"}} value={recordObj.bcoid}/>\n            </div>\n            <div className=\"leftblock\" style={{width:\"50%\",margin:\"0px 0px 0px 10px\"}}>\n                File Name(s)<br/> \n                <input className=\"form-control\" style={{width:\"100%\"}} value={recordObj.history.file_name}/>\n            </div>\n            <div className=\"leftblock\" style={{width:\"20%\",margin:\"0px 0px 0px 10px\"}}>\n                Release Date<br/>\n                <input className=\"form-control\" style={{width:\"100%\"}} value={recordObj.history.release_date}/>\n            </div>\n            <div className=\"leftblock\" style={{width:\"20%\",margin:\"20px 0px 0px 0px\"}}>\n                Field Count<br/> \n                <input className=\"form-control\" style={{width:\"100%\"}} value={recordObj.history.field_count}/>\n            </div>\n            <div className=\"leftblock\" style={{width:\"50%\",margin:\"20px 0px 0px 10px\"}}>\n                Row Count<br/>\n                <input className=\"form-control\" style={{width:\"100%\"}} value={recordObj.history.row_count}/>\n            </div>\n            <div className=\"leftblock\" style={{width:\"20%\",margin:\"20px 0px 0px 10px\"}}>\n                RecordID Count<br/>\n                <input className=\"form-control\" style={{width:\"100%\"}} value={recordObj.history.id_count}/>\n            </div>\n            <div className=\"leftblock\" style={{width:\"50%\",margin:\"20px 0px 0px 0px\"}}>\n                Fields Added ({(\"fields_added\" in recordObj.history ? recordObj.history.fields_added.length : 0)})<br/> \n                <div className=\"leftblock\" style={{width:\"100%\", height:\"100px\", overflow:\"auto\",background:\"#fff\", padding:   \"10px\"}}>\n                  <pre>{ (\"fields_added\" in recordObj.history ? recordObj.history.fields_added.join(\"\\n\") : \"\") } </pre>\n                </div>\n            </div>\n            <div className=\"leftblock\" style={{width:\"40%\",margin:\"20px 0px 0px 10px\"}}>\n                Fields Removed({(\"fields_removed\" in recordObj.history ? recordObj.history.fields_removed.length : 0)})<br/>\n                <div className=\"leftblock\" style={{width:\"100%\", height:\"100px\", overflow:\"auto\",background:\"#fff\", padding:   \"10px\"}}>\n                  <pre>{ (\"fields_removed\" in recordObj.history ? recordObj.history.fields_removed.join(\"\\n\") : \"\") }</pre>\n                </div>\n            </div>\n            <div className=\"leftblock\" style={{width:\"50%\",margin:\"20px 0px 0px 0px\"}}>\n                RecordIDs Added({(\"ids_added\" in recordObj.history ? recordObj.history.ids_added.length : 0)})<br/>\n                <div className=\"leftblock\" style={{width:\"100%\", height:\"100px\", overflow:\"auto\",background:\"#fff\", padding:   \"10px\"}}>\n                  <pre>{ (\"ids_added\" in recordObj.history ? recordObj.history.ids_added.join(\"\\n\") : \"\") }</pre>\n                </div>\n            </div>\n            <div className=\"leftblock\" style={{width:\"40%\",margin:\"20px 0px 0px 10px\"}}>\n                RecordIDs Removed({(\"ids_removed\" in recordObj.history ? recordObj.history.ids_removed.length : 0)})<br/>\n                <div className=\"leftblock\" style={{width:\"100%\", height:\"100px\", overflow:\"auto\",background:\"#fff\", padding:\"10px\"}}>\n                  <pre>{ (\"ids_removed\" in recordObj.history ? recordObj.history.ids_removed.join(\"\\n\") : \"\") }</pre>\n                </div>\n            </div>\n          </div>\n      </div>\n    );\n  }\n}\n\nexport default HistoryDetail;\n\n","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/file_uploads.jsx",["116","117","118","119","120","121","122"],"import React, { Component } from \"react\";\nimport Alertdialog from './dialogbox';\nimport Loadingicon from \"./loading_icon\";\nimport * as LocalConfig from \"./local_config\";\nimport { Link } from \"react-router-dom\";\nimport DoubleArrowOutlinedIcon from '@material-ui/icons/DoubleArrowOutlined';\nimport { Chart } from \"react-google-charts\";\n\nimport $ from \"jquery\";\n\n\nclass FileUploads extends Component {\n  \n  state = {\n    confirmation:\"\",\n    viewstatus:0,\n    tabidx:\"failedrows\",\n    cn:\"\",\n    dialog:{\n      status:false, \n      msg:\"\"\n    }\n  };\n\n\n  handleDialogClose = () => {\n    var tmpState = this.state;\n    tmpState.dialog.status = false;\n    tmpState.viewstatus = 0;\n    $(\"#tabcn\").css(\"display\", \"none\");\n    this.setState(tmpState);\n  }\n\n  handleTitleClick = (e) => {\n    var tmpState = this.state;\n    tmpState.tabidx = e.target.id.split(\"-\")[0];\n    this.setState(tmpState);\n  };\n\n\n  handleGlycanFinder = () => {\n\n    var reqObj = {\"filename\":this.state.response.inputinfo.name};\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_glycan_finder;\n  \n\n    const s = \"width:40%;margin:20px 30% 40px 30%\";\n    var tmpCn = '<img src=\"' + process.env.PUBLIC_URL + '/imglib/loading.gif\" style=\"'+s+'\">';\n    $(\"#glycan_finder_results_cn\").html(tmpCn);\n    $(\"#run_glycan_finder\").html(\"\");\n\n\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          var tmpState = this.state;\n          tmpState.isLoaded = true;\n          tmpState.response = result;\n          if (result.status === 0){\n            tmpState.dialog.status = true;\n            tmpState.dialog.msg = result.error;\n          }\n          this.setState(tmpState);\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n\n  }\n\n\n\n\n  handleFileSubmit = () => {\n\n    var reqObj = {\"fname\":\"\", \"lname\":\"\", \"email\":\"\", \"affilation\":\"\"};\n    for (var f in reqObj){\n      reqObj[f] = $('#'+f).val();\n    }\n    reqObj[\"filename\"] = this.state.response.inputinfo.name;\n \n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_submit;\n\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          var tmpState = this.state;\n          tmpState.isLoaded = true;\n          if (result.status === 0){\n            tmpState.dialog.status = true;\n            tmpState.dialog.msg = result.error;\n          }\n          this.setState(tmpState);\n          $(\"#submitcn\").html(result.confirmation);\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n\n  }\n\n\n\n  handleFileUpload = () => {\n    \n    var file = $('#userfile')[0].files[0];\n    var fileFormat = $('#formatselector').val();\n    var qcType = $('#qcselector').val();\n    var dataVersion = $('#dataversion').val();\n\n    var formData = new FormData();\n    formData.append(\"userfile\", file);\n    formData.append(\"format\", fileFormat);\n    formData.append(\"qctype\", qcType);\n    formData.append(\"dataversion\", dataVersion);\n    \n    var tmpState = this.state;\n    tmpState.viewstatus = 1;\n    this.setState(tmpState);\n\n\n    var sizeLimit = 1000000000;\n    if (file.size > sizeLimit){\n        var msg = 'Your submitted file is ' + file.size + ' Bytes big. ';\n        msg += 'This exceeds maximum allowed file size of ' + sizeLimit + ' Bytes.';\n        var tmpState = this.state;\n        tmpState.dialog.status = true;\n        tmpState.dialog.msg = msg;\n        this.setState(tmpState);\n        return;\n    }\n   \n    const requestOptions = { \n      method: 'POST', \n      body: formData\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_upload;\n\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          var tmpState = this.state;\n          tmpState.response = result;\n          tmpState.viewstatus = 2;\n          tmpState.isLoaded = true;\n          if (tmpState.response.status === 0){\n            tmpState.dialog.status = true;\n            tmpState.dialog.msg = tmpState.response.error;\n          }\n          if ([\"png\", \"jpeg\"].indexOf(tmpState.response.inputinfo.format) !== -1){\n            tmpState.tabidx = \"glycanfinder\";\n          }\n          this.setState(tmpState);\n          console.log(\"Ajax response:\", result);\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n\n  }\n\n\n\n  getFormCn = () => {\n\n    var formatOptions = [];\n    for (var i in this.props.initObj.fileuploadformats){\n      var obj = this.props.initObj.fileuploadformats[i];\n      if ([\"csv\", \"tsv\"].indexOf(obj.id) !== -1){\n        formatOptions.push(<option value={obj.id}>{obj.label}</option>);\n      }\n    }\n\n    var qcOptions = [];\n    for (var i in this.props.initObj.fileuploadqc){\n      var obj = this.props.initObj.fileuploadqc[i];\n      qcOptions.push(<option value={obj.id}>{obj.label}</option>);\n    }\n\n    var verOptions = [];\n    for (var i in this.props.initObj.versionlist){\n      var v = this.props.initObj.versionlist[i];\n      verOptions.push(<option value={v}>v-{v}</option>);\n    }\n\n\n    return(\n      <div className=\"leftblock formone\" style={{width:\"100%\",marginTop:\"10px\"}}>\n        <div className=\"leftblock\" style={{width:\"100%\"}}>\n          <br/>  \n          <h5>Glycan Image Search</h5>\n            The Glycan Finder search tool allows you to find glycan records that\n            have similar image/structure to your query glycan image. \n                  <a id=\"glycan_finder\" href=\"/glycan_finder\"\n                  className=\"reglink\"> Click here to run Glycan Finder</a>.\n            <br/><br/><br/>\n            <h5>CSV/TSV File Uploads</h5>\n            Upload your csv or tsv file (\n                example files: <a href=\"/ln2data/downloads/examples/glyco_sites.csv\"\n                  className=\"reglink\" download>glyco_sites.csv</a>, &nbsp;\n                <a href=\"/ln2data/downloads/examples/glyco_sites_unicarbkb.csv\"\n                className=\"reglink\" download>glyco_sites_unicarbkb.csv</a>).\n                Visit the\n                  <a id=\"upload_help\" href=\"/static/upload_help\"\n                  className=\"reglink\"> tutorial/help page </a>\n                 for detailed information on how to use this functionality.\n        </div>\n        <div className=\"leftblock\" style={{width:\"25%\",\n                margin:\"20px 0px 0px 0px\",border:\"0px dashed orange\"}}>\n              <b>File Format</b><br/>\n              <select id=\"formatselector\"  className=\"form-control\">\n                {formatOptions}\n              </select>\n        </div>\n\n        <div className=\"leftblock\" style={{width:\"15%\", margin:\"20px 0px 0px 10px\"}}>\n              <b>QC Type</b><br/>\n              <select id=\"qcselector\"  className=\"form-control\">\n                {qcOptions}\n              </select>\n        </div>\n\n        <div className=\"leftblock\" style={{width:\"12%\", margin:\"20px 0px 0px 10px\"}}>\n              <b>Data Version</b><br/>\n              <select id=\"dataversion\"  className=\"form-control\">\n                {verOptions}\n              </select>\n        </div>\n\n        <div className=\"leftblock\" style={{width:\"30%\", margin:\"20px 0px 0px 10px\"}}>\n              <b>Select File</b><br/>\n              <input type=\"file\" id=\"userfile\"  className=\"form-control\"/>\n        </div>\n\n        <div className=\"leftblock\" style={{width:\"10%\", margin:\"20px 0px 0px 10px\"}}>\n              &nbsp;<br/>\n              <input\n                type=\"submit\" name=\"userfile\"  value=\"Upload File\" className=\"form-control\"\n                onClick={this.handleFileUpload}\n              />\n        </div>\n      </div>\n    );\n\n  }\n  \n\n\n\n\n  render() {\n\n\n    var tabHash = {\n        failedrows:{ title:\"Failed Rows\", cn:\"\"},\n        submitfile: { title:\"Submit File\", cn:\"\"}\n    };\n    var tabHashTwo = {\n      glycanfinder:{title:\"Run Glycan Finder\", cn:\"\"}\n    };\n\n    if (this.state.dialog.status === false && this.state.viewstatus === 1){\n      $(\"#tabcn\").css(\"display\", \"block\");\n      tabHash.failedrows.cn = (<Loadingicon/>)\n      tabHash.submitfile.cn = (<Loadingicon/>)\n    } \n    else if (this.state.dialog.status === false && this.state.viewstatus === 2){\n        if ([\"csv\", \"tsv\"].indexOf(this.state.response.inputinfo.format) !== -1){\n            tabHash.failedrows.cn = (\n              <div className=\"leftblock\">\n                <div className=\"leftblock\" style={{width:\"100%\", fontWeight:\"bold\"}}>\n                  Summary\n                </div>\n                <div className=\"leftblock\" style={{width:\"100%\", padding:\"10px\", border:\"1px solid #eee\"}}>\n                  <pre>{JSON.stringify(this.state.response.summary, null, 4)}</pre>\n                </div>\n                <div className=\"leftblock\" style={{margin:\"20px 0px 0px 0px\"}}>\n                  <Chart width={'100%'} chartType=\"Table\" loader={<div>Loading Chart</div>}\n                    data={this.state.response.failedrows}\n                    options={{showRowNumber: false, width: '100%', height: '100%', \n                        allowHtml: true }}\n                    rootProps={{ 'data-testid': '1' }}   \n                  />\n                </div>\n              </div>\n            );\n            var tmpCn = (\n              <div className=\"leftblock\" style={{color:\"red\"}}> \n                <br/><br/>\n                This file cannot be uploaded since it has {this.state.response.summary.fatal_qc_flags} fatal error(s).\n              </div>\n            );\n            if (this.state.response.summary.fatal_qc_flags === 0){\n              tmpCn = (\n                <div id=\"submitcn\" className=\"leftblock\" style={{width:\"50%\", margin:\"0px 0px 0px 20px\"}}>\n                    Please fill and submit your information. <br/><br/>\n                    First Name<br/>\n                    <input type=\"text\" id=\"fname\" className=\"form-control\" /><br/>\n                    Last Name<br/>\n                    <input type=\"text\" id=\"lname\" className=\"form-control\" /> <br/>\n                    Email Address<br/>\n                    <input type=\"text\" id=\"email\" className=\"form-control\" /> <br/>\n                    Affilation<br/>\n                    <select id=\"affilation\"  className=\"form-control\">\n                      {affOptions}\n                    </select><br/>\n                    <input type=\"submit\" id=\"submitfile\"  value=\"Submit File\" className=\"form-control\"\n                      onClick={this.handleFileSubmit}\n                    />\n \n                </div>\n              );\n            }\n            tabHash.submitfile.cn = tmpCn;\n        }\n        else if ([\"png\", \"jpeg\"].indexOf(this.state.response.inputinfo.format) !== -1){\n          var server = process.env.REACT_APP_SERVER;\n          var imageUrl = \"/ln2data/userdata/\"+server+\"/tmp/\" + this.state.response.inputinfo.name;\n          \n\n          var chartCn = \"\";\n          if (\"mappingrows\" in this.state.response){\n\n              chartCn = (\n                <div>\n                <h5>Glycan Finder Result</h5>\n                <Chart width={'100%'} chartType=\"Table\" loader={<div>Loading Chart</div>}\n                  data={this.state.response.mappingrows}\n                  options={{allowHtml: true, showRowNumber: false, width: '100%', height: '100%'}}\n                  rootProps={{ 'data-testid': '1' }}\n                />\n                </div>\n              );\n          }\n          var tmpCn = (\n                <div>\n                <div className=\"leftblock\" style={{width:\"70%\", margin:\"0px 0px 0px  20px\"}}>\n                    <h5>Query Glycan Image </h5>\n                    <img src={imageUrl}/><br/>\n                </div>\n                <div id=\"run_glycan_finder\"  className=\"leftblock\" style={{width:\"70%\", margin:\"20px 0px  0px  20px\"}}>\n                <input type=\"submit\" value=\"Run Glycan Finder\" \n                      className=\"form-control btn btn-outline-secondary btn-sm\" \n                      style={{width:\"200px\"}}\n                      onClick={this.handleGlycanFinder}\n                    />\n                </div>\n                <div id=\"glycan_finder_results_cn\" className=\"leftblock\" \n                  style={{width:\"100%\", margin:\"40px 0px 0px  20px\"}}>\n                    {chartCn}\n                </div>\n                </div>\n            );\n            tabHashTwo.glycanfinder.cn = tmpCn;\n        }\n    }\n\n    var tabTitleList= [];\n    var tabContentList = []; \n    for (var tabId in tabHash){\n        var activeFlag = (tabId === this.state.tabidx ? \"active\" : \"\" );\n        var btnStyle = {width:\"100%\", fontSize:\"15px\", color:\"#333\", border:\"1px solid #ccc\"};\n        btnStyle.color = (activeFlag === \"active\" ? \"#990000\" : \"#333\");\n        btnStyle.background = (activeFlag === \"active\" ? \"#fff\" : \"#eee\");\n        btnStyle.borderBottom = (activeFlag === \"active\" ? \"1px solid #fff\" : \"1px solid #ccc\");\n        tabTitleList.push(\n                <li key={\"tab-\"+tabId} className=\"nav-item\" role=\"presentation\"\n                  style={{width:\"25%\"}}>\n                  <button className={\"nav-link \" + activeFlag}\n                  id={tabId + \"-tab\"}  data-bs-toggle=\"tab\"\n                  data-bs-target={\"#sample_view\"} type=\"button\" role=\"tab\" aria-controls={\"sample_view-cn\"} aria-selected=\"true\"\n                  style={btnStyle} onClick={this.handleTitleClick}\n                >\n                  {tabHash[tabId].title}\n                </button>\n              </li>\n        );\n        tabContentList.push(\n                <div key={\"formcn-\"+tabId}\n                  className={\"tab-pane fade show  leftblock \" + activeFlag}\n                  id={tabId+\"-cn\"} role=\"tabpanel\" aria-labelledby={tabId + \"-tab\"}\n                  style={{width:\"100%\",  padding:\"20px\", background:\"#fff\"}}>\n                  {tabHash[tabId].cn}\n                </div>);\n    }\n\n\n    var tabsCn = (\n            <div id=\"tabcn\" className=\"leftblock\" style={{width:\"100%\", display:\"none\", margin:\"20px 0px 0px 0px\"}}>\n              <ul className=\"nav nav-tabs\" id=\"myTab\" role=\"tablist\" style={{width:\"100%\"}}>\n                {tabTitleList}\n              </ul>\n              <div className=\"tab-content\" id=\"myTabContent\"\n                  style={{width:\"100%\", margin:\"20px 0px 0px 0px\"}}>\n                {tabContentList}\n              </div>\n          </div>);\n\n\n     var affOptions = [];\n    for (var i in this.props.initObj.affilations){\n      var obj = this.props.initObj.affilations[i];\n      affOptions.push(<option value={obj.id}>{obj.label}</option>);\n    }\n\n    var formCn = this.getFormCn();\n\n    return (\n      <div className=\"pagecn\" style={{border:\"0px dashed red\", zIndex:100}}>\n        <Alertdialog dialog={this.state.dialog} onClose={this.handleDialogClose}/>\n        <div className=\"leftblock\" style={{width:\"100%\", \n          margin:\"60px 0px 0px 0px\", \n          fontSize:\"17px\", borderBottom:\"1px solid #ccc\"}}>\n          <DoubleArrowOutlinedIcon style={{color:\"#2358C2\", fontSize:\"17px\" }}/>\n          &nbsp;\n          <Link to=\"/\" className=\"reglink\">HOME </Link> \n            &nbsp; / &nbsp;\n          <Link to={\"/uploads\"} className=\"reglink\">FILE UPLOADS</Link> \n        </div>\n        \n        {formCn}\n        <div className=\"leftblock\" style={{width:\"100%\",margin:\"15px 0px 0px 0px\",\n            borderBottom:\"1px solid #ccc\"}}></div>\n       <div className=\"leftblock\" style={{width:\"100%\", margin:\"40px 0px 0px 0px\", \n           border:\"0px dashed orange\"}}>\n          {tabsCn}\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default FileUploads;\n\n","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/history_list.jsx",["123","124","125"],"import React, { Component } from \"react\";\nimport Alertdialog from './dialogbox';\nimport Loadingicon from \"./loading_icon\";\nimport Searchbox from \"./search_box\";\nimport * as LocalConfig from \"./local_config\";\nimport { Link } from \"react-router-dom\";\nimport DoubleArrowOutlinedIcon from '@material-ui/icons/DoubleArrowOutlined';\nimport { Chart } from \"react-google-charts\";\n\nimport $ from \"jquery\";\n\n\nclass HistoryList extends Component {\n  \n  state = {\n    ver:\"\",\n    tabidx:\"sampleview\",\n    dialog:{\n      status:false, \n      msg:\"\"\n    }\n  };\n\n\n  handleKeyPress = (e) => {\n    if(e.key === \"Enter\"){\n      e.preventDefault();\n      this.handleSearch();\n    }\n  }\n\n\n  handleSearch = () => {\n    var queryValue = $(\"#query\").val();\n    queryValue = (queryValue === undefined ? \"\" : queryValue);\n    var reqObj = {\n      \"doctype\":\"track\", \n      \"dataversion\":this.props.initObj.dataversion,\n      \"query\":queryValue\n    };\n    this.fetchPageData(reqObj);\n  }\n\n\n  handleDialogClose = () => {\n    var tmpState = this.state;\n    tmpState.dialog.status = false;\n    this.setState(tmpState);\n  }\n  \n  handleVersion = () => {\n    var ver = $(\"#verselector\").val();\n    var reqObj = {\"doctype\":\"track\", \"dataversion\":ver};\n    this.fetchPageData(reqObj);\n    var tmpState = this.state;\n    tmpState.ver = ver;\n    this.setState(tmpState);\n  }\n\n  fetchPageData(reqObj){\n    const requestOptions = { \n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_history_list;\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          var tmpState = this.state;\n          tmpState.response = result;\n          tmpState.isLoaded = true;          \n          if (tmpState.response.status === 0){\n            tmpState.dialog.status = true;\n            tmpState.dialog.msg = tmpState.response.error;\n          }\n          this.setState(tmpState);\n          //console.log(\"Request:\",svcUrl);\n          console.log(\"Ajax response:\", result);\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n  }\n\n\n  componentDidMount() {\n    var reqObj = {\n      \"doctype\":\"track\", \n      \"dataversion\":this.props.initObj.dataversion,\n      \"query\":\"\"\n    };\n    this.fetchPageData(reqObj);\n  }\n\n\n\n  render() {\n\n    if (!(\"response\" in this.state)){\n      return <Loadingicon/>\n    }\n    var pageIdLabel = this.props.pageId.toUpperCase();\n    var tableData = this.state.response.tabledata.data;\n\n    var verOptions = [];\n    var verList = this.props.initObj.versionlist;\n    var selectedVer = (this.state.ver !== \"\" ? this.state.ver : verList[0]);\n    for (var i=0; i < verList.length -1; i++ ){\n        var ver = verList[i];\n        var lastVer = verList[parseInt(i)+1];\n        var lbl = \"Changes from v-\" + lastVer + \" to \" + \"v-\" + ver;\n        verOptions.push(<option value={ver}>{lbl}</option>);\n    }\n    var s = {width:\"100%\"};\n    var verSelector = (\n      <select id=\"verselector\" className=\"form-select\" style={s} onChange={this.handleVersion}>{verOptions}\n      </select>\n    );\n\n\n\n\n    return (\n      <div className=\"pagecn\">\n        <Alertdialog dialog={this.state.dialog} onClose={this.handleDialogClose}/>\n        <div className=\"leftblock\" style={{width:\"100%\", \n          margin:\"60px 0px 0px 0px\", \n          fontSize:\"17px\", borderBottom:\"1px solid #ccc\"}}>\n          <DoubleArrowOutlinedIcon style={{color:\"#2358C2\", fontSize:\"17px\" }}/>\n          &nbsp;\n          <Link to=\"/\" className=\"reglink\">HOME </Link> \n            &nbsp; / &nbsp;\n          <Link to={\"/static/\"+this.props.pageId} className=\"reglink\">{pageIdLabel}</Link> \n        </div>\n\n\n        <div className=\"leftblock\" style={{width:\"40%\", margin:\"40px 0px 0px 0px\"}}>\n          <div className=\"leftblock\"  style={{width:\"90%\"}}>\n            Select version transition\n          </div>\n          <span>{verSelector}</span><br/>\n        </div>\n\n\n\n        <div className=\"leftblock\" style={{width:\"100%\", margin:\"0px 0px 0px 0px\"}}>\n            <Chart \n                width={'100%'}\n                chartType=\"Table\" \n                loader={<div>Loading Chart</div>}\n                data={tableData}\n                options={\n                    {\n                        showRowNumber: false, width: '100%', height: '100%',\n                        page:'enable', \n                        pageSize:50, \n                        allowHtml:true, \n                        cssClassNames:{\n                            headerRow: 'googleheaderrow',\n                            tableRow:'googlerow', \n                            oddTableRow:'googleoddrow',\n                            headerCell:'googleheadercell',\n                            tableCell:'googlecell'\n                        }\n                    }\n                }\n                rootProps={{ 'data-testid': '1' }}   \n          />\n        </div>\n\n\n      </div>\n    );\n  }\n}\n\nexport default HistoryList;\n\n","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/dataset_list.jsx",["126","127","128","129"],"import React, { Component } from \"react\";\nimport Searchbox from \"./search_box\";\nimport Filter from \"./filter\";\nimport { filterObjectList} from './util';\nimport * as LocalConfig from \"./local_config\";\nimport Loadingicon from \"./loading_icon\";\nimport Alertdialog from './dialogbox';\nimport $ from \"jquery\";\nimport Tableview from \"./table\";\nimport {getColumns} from \"./columns\";\nimport { Markup } from 'interweave';\n\n\nclass DatasetList extends Component {  \n  \n  state = {\n    searchquery:\"\",\n    filterlist: [],\n    objlist:[],\n    statobj:{},\n    pageIdx:1,\n    pageBatchSize:5,\n    pageStartIdx:1,\n    pageEndIdx:5,\n    dialog:{\n      status:false, \n      msg:\"\"\n    }\n  };\n\n  componentDidMount() {\n    this.handleGetResults();\n  }\n\n\n  handleDialogClose = () => {\n    var tmpState = this.state;\n    tmpState.dialog.status = false;\n    this.setState(tmpState);\n  }\n\n  \n\n   handleGetResults = () => {\n    var reqObj = {list_id:this.props.listId};\n\n    this.handleFilterReset();\n\n    var tmpState = this.state;\n    tmpState.objlist = [];\n    tmpState.isLoaded = false;\n    this.setState(tmpState);\n\n    const requestOptions = { \n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_list;\n    console.log(\"API:\", svcUrl);\n    console.log(\"REQ:\", reqObj);\n\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          console.log(\"RES:\", result);\n          var tmpState = this.state;\n          tmpState.isLoaded = true;          \n          if (result.status === 0){\n            tmpState.dialog.status = true;\n            tmpState.dialog.msg = result.error;\n          }\n          tmpState.objlist = result.recordlist;\n          tmpState.statobj = result.stats;\n          tmpState.searchquery = result.searchquery;\n          this.setState(tmpState);\n        },\n        // Note: it's important to handle errors here\n        // instead of a catch() block so that we don't swallow\n        // exceptions from actual bugs in components.\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n  }\n\n\n  handleFilterReset = () => {\n    $('input[name=\"filtervalue\"]:checkbox:checked').prop(\"checked\", false);\n    this.setState({ filterlist: [] });\n  };\n\n  handleFilterApply = () => {\n    var tmpList = $('input[name=\"filtervalue\"]:checkbox:checked')\n      .map(function () {return $(this).val();}).get(); // <----\n    this.setState({ filterlist: tmpList });\n    \n  };\n\n  handleFilterIcon = () => {\n    $(\".filterboxwrapper\").toggle();\n  };\n\n\n    handleKeyPress = (e) => {\n        if(e.key === \"Enter\"){\n            e.preventDefault();\n            this.handleSearch();\n        }\n    }\n      \n    \n    handleSearch = () => {\n        window.location.href = \"/\";\n    }\n\n\n\n    render() {\n\n        if (this.state.isLoaded === false){\n            return <Loadingicon/>\n        }\n        if (this.state.dialog.status === true){\n            return (<div><Alertdialog dialog={this.state.dialog} onClose={this.handleDialogClose}/></div>);\n        }\n        \n\n        var filObjOne = filterObjectList(this.state.objlist, this.state.filterlist);\n        var passedObjList = filObjOne.passedobjlist;\n        var passedCount = passedObjList.length;\n        //var filterInfo = filObjOne.filterinfo;\n    \n        var filObjTwo = filterObjectList(passedObjList, []);\n        var filterInfo = filObjTwo.filterinfo;\n\n        var batchSize = 20;\n        var pageCount = parseInt(passedObjList.length/batchSize) + 1;\n        pageCount = (this.state.objlist.length > 0 ? pageCount : 0);\n\n        var startIdx = batchSize * (parseInt(this.state.pageIdx) - 1) + 1;\n        var endIdx = startIdx + batchSize;\n        endIdx = (endIdx > passedCount ? passedCount : endIdx);\n\n        var tmpList = [];\n        for (var i in this.state.filterlist){\n            var h = \"<b>\" + this.state.filterlist[i].split(\"|\")[1] + \"</b>\";\n            tmpList.push(h);\n        }\n        var resultSummary = \"\"\n        if (\"total\" in this.state.statobj){\n            resultSummary = \"<b>\" + this.state.statobj.total + \"</b> datasets found\";\n            if (tmpList.length > 0){\n                resultSummary += \", <b>\" + passedObjList.length + \"</b> shown after filters: \";\n                resultSummary += tmpList.join(\"', '\")\n            }\n            resultSummary += \".\";\n        }\n\n        var tableId = \"tableone\";\n        var idField = \"bcoid\";\n        var tableCols = getColumns(tableId);\n        var tableRows = [];\n        for (var i in passedObjList){\n            var obj = passedObjList[i];\n            var o = {};\n            for (var j in tableCols){\n                var f = (tableCols[j][\"field\"] === \"id\" ? idField : tableCols[j][\"field\"])\n                o[tableCols[j][\"field\"]] = obj[f]\n            }\n            o[\"details\"] =  {\"bcoid\":o.id, \"label\":\" ... view details\"}\n            o[\"details\"][\"rowlist\"] = (\"rowlist\" in obj ? obj[\"rowlist\"] : []);\n            tableRows.push(o)\n        }\n\n        return (\n            <div>\n                <div className=\"searchboxwrapper\">\n                    <div style={{display:\"block\", textAlign:\"center\"}}>\n                        Search results for `{this.state.searchquery}`,<br/>\n                        <a href=\"/\">Click Here</a> to Reset Search\n                    </div>\n                </div>\n               \n                <div className=\"material-icons rightblock filtericoncn\" onClick={this.handleFilterIcon}>tune</div>\n                <div className=\"statscn\"> <Markup content={resultSummary}/> </div>\n\n                <div className=\"filterboxwrapper\" >\n                    <Filter\n                        filterinfo={filterInfo}\n                        filterlist={this.state.filterlist}\n                        resultcount={this.state.objlist.length}\n                        resultSummary={resultSummary}\n                        handleFilterApply = {this.handleFilterApply}\n                    />\n                </div>\n                <div className=\"searchresultscn\">\n                    <Tableview cols={tableCols} rows={tableRows}/>\n                </div>\n            </div>\n        );\n  }\n}\n\nexport default DatasetList;\n","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/dialogbox.jsx",[],"/data/shared/repos/glygen-backend-datasetviewer/app/src/components/glycan_finder.jsx",["130","131"],"import React, { Component } from \"react\";\nimport Alertdialog from './dialogbox';\nimport Loadingicon from \"./loading_icon\";\nimport * as LocalConfig from \"./local_config\";\nimport { Link } from \"react-router-dom\";\nimport DoubleArrowOutlinedIcon from '@material-ui/icons/DoubleArrowOutlined';\nimport { Chart } from \"react-google-charts\";\n\nimport $ from \"jquery\";\n\n\nclass GlycanFinder extends Component {\n  \n  state = {\n    confirmation:\"\",\n    viewstatus:0,\n    tabidx:\"failedrows\",\n    cn:\"\",\n    dialog:{\n      status:false, \n      msg:\"\"\n    }\n  };\n\n\n  handleDialogClose = () => {\n    var tmpState = this.state;\n    tmpState.dialog.status = false;\n    tmpState.viewstatus = 0;\n    $(\"#tabcn\").css(\"display\", \"none\");\n    this.setState(tmpState);\n  }\n\n  handleTitleClick = (e) => {\n    var tmpState = this.state;\n    tmpState.tabidx = e.target.id.split(\"-\")[0];\n    this.setState(tmpState);\n  };\n\n\n  handleGlycanFinder = () => {\n\n    var reqObj = {\"filename\":this.state.response.inputinfo.name};\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_glycan_finder;\n  \n\n    const s = \"width:40%;margin:20px 30% 40px 30%\";\n    var tmpCn = '<img src=\"' + process.env.PUBLIC_URL + '/imglib/loading.gif\" style=\"'+s+'\">';\n    $(\"#glycan_finder_results_cn\").html(tmpCn);\n    $(\"#run_glycan_finder\").html(\"\");\n\n\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          var tmpState = this.state;\n          tmpState.isLoaded = true;\n          tmpState.response = result;\n          if (result.status === 0){\n            tmpState.dialog.status = true;\n            tmpState.dialog.msg = result.error;\n          }\n          this.setState(tmpState);\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n\n  }\n\n\n\n\n  handleFileSubmit = () => {\n\n    var reqObj = {\"fname\":\"\", \"lname\":\"\", \"email\":\"\", \"affilation\":\"\"};\n    for (var f in reqObj){\n      reqObj[f] = $('#'+f).val();\n    }\n    reqObj[\"filename\"] = this.state.response.inputinfo.name;\n \n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_submit;\n\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          var tmpState = this.state;\n          tmpState.isLoaded = true;\n          if (result.status === 0){\n            tmpState.dialog.status = true;\n            tmpState.dialog.msg = result.error;\n          }\n          this.setState(tmpState);\n          $(\"#submitcn\").html(result.confirmation);\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n\n  }\n\n\n\n  handleFileUpload = () => {\n    \n    var file = $('#userfile')[0].files[0];\n    var fileFormat = $('#formatselector').val();\n    var qcType = $('#qcselector').val();\n    var dataVersion = $('#dataversion').val();\n\n    var formData = new FormData();\n    formData.append(\"userfile\", file);\n    formData.append(\"format\", fileFormat);\n    formData.append(\"qctype\", qcType);\n    formData.append(\"dataversion\", dataVersion);\n    \n    var tmpState = this.state;\n    tmpState.viewstatus = 1;\n    this.setState(tmpState);\n\n\n    var sizeLimit = 1000000000;\n    if (file.size > sizeLimit){\n        var msg = 'Your submitted file is ' + file.size + ' Bytes big. ';\n        msg += 'This exceeds maximum allowed file size of ' + sizeLimit + ' Bytes.';\n        var tmpState = this.state;\n        tmpState.dialog.status = true;\n        tmpState.dialog.msg = msg;\n        this.setState(tmpState);\n        return;\n    }\n   \n    const requestOptions = { \n      method: 'POST', \n      body: formData\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_upload;\n\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          var tmpState = this.state;\n          tmpState.response = result;\n          tmpState.viewstatus = 2;\n          tmpState.isLoaded = true;\n          if (tmpState.response.status === 0){\n            tmpState.dialog.status = true;\n            tmpState.dialog.msg = tmpState.response.error;\n          }\n          if ([\"png\", \"jpeg\"].indexOf(tmpState.response.inputinfo.format) !== -1){\n            tmpState.tabidx = \"glycanfinder\";\n          }\n          this.setState(tmpState);\n          console.log(\"Ajax response:\", result);\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n\n  }\n\n\n  \n\n  getFormCn = () => {\n\n    var formatOptions = [];\n    var obj = {\"id\":\"png\", \"label\":\"Glycan PNG\"};\n    formatOptions.push(<option value={obj.id}>{obj.label}</option>);\n\n    return(\n      <div className=\"leftblock formone\" style={{width:\"100%\",marginTop:\"10px\"}}>\n        <div className=\"leftblock\" style={{width:\"100%\"}}>\n              <br/>Upload image file (\n                example file: <a href=\"/ln2data/downloads/examples/glycan_image.png\"\n                className=\"reglink\" download>glycan_image.png</a>).\n        </div>\n        <div className=\"leftblock\" style={{width:\"25%\",\n                margin:\"20px 0px 0px 0px\",border:\"0px dashed orange\"}}>\n              <b>File Format</b><br/>\n              <select id=\"formatselector\"  className=\"form-control\">\n                {formatOptions}\n              </select>\n        </div>\n\n        <div className=\"leftblock\" style={{width:\"30%\", margin:\"20px 0px 0px 10px\"}}>\n              <b>Select File</b><br/>\n              <input type=\"file\" id=\"userfile\"  className=\"form-control\"/>\n        </div>\n\n        <div className=\"leftblock\" style={{width:\"10%\", margin:\"20px 0px 0px 10px\"}}>\n              &nbsp;<br/>\n              <input\n                type=\"submit\" name=\"userfile\"  value=\"Upload File\" className=\"form-control\"\n                onClick={this.handleFileUpload}\n              />\n        </div>\n      </div>\n    );\n\n  }\n\n\n\n  render() {\n\n\n    var tabHash = {\n        glycanfinder:{title:\"Run Glycan Finder\", cn:\"\"}\n    };\n\n    if (this.state.dialog.status === false && this.state.viewstatus === 1){\n      $(\"#tabcn\").css(\"display\", \"block\");\n      tabHash.glycanfinder.cn = (<Loadingicon/>)\n    } \n    else if (this.state.dialog.status === false && this.state.viewstatus === 2){\n        if ([\"png\", \"jpeg\"].indexOf(this.state.response.inputinfo.format) !== -1){\n          var server = process.env.REACT_APP_SERVER;\n          var imageUrl = \"/ln2data/userdata/\"+server+\"/tmp/\" + this.state.response.inputinfo.name;\n          \n\n          var chartCn = \"\";\n          if (\"mappingrows\" in this.state.response){\n\n              chartCn = (\n                <div>\n                <h5>Glycan Finder Result</h5>\n                <Chart width={'100%'} chartType=\"Table\" loader={<div>Loading Chart</div>}\n                  data={this.state.response.mappingrows}\n                  options={{allowHtml: true, showRowNumber: false, width: '100%', height: '100%'}}\n                  rootProps={{ 'data-testid': '1' }}\n                />\n                </div>\n              );\n          }\n          var tmpCn = (\n                <div>\n                <div className=\"leftblock\" style={{width:\"70%\", margin:\"0px 0px 0px  20px\"}}>\n                    <h5>Query Glycan Image </h5>\n                    <img src={imageUrl}/><br/>\n                </div>\n                <div id=\"run_glycan_finder\"  className=\"leftblock\" style={{width:\"70%\", margin:\"20px 0px  0px  20px\"}}>\n                <input type=\"submit\" value=\"Run Glycan Finder\" \n                      className=\"form-control btn btn-outline-secondary btn-sm\" \n                      style={{width:\"200px\"}}\n                      onClick={this.handleGlycanFinder}\n                    />\n                </div>\n                <div id=\"glycan_finder_results_cn\" className=\"leftblock\" \n                  style={{width:\"100%\", margin:\"40px 0px 0px  20px\"}}>\n                    {chartCn}\n                </div>\n                </div>\n            );\n            tabHash.glycanfinder.cn = tmpCn;\n        }\n    }\n\n    var tabTitleList= [];\n    var tabContentList = []; \n    for (var tabId in tabHash){\n        var activeFlag = (tabId === this.state.tabidx ? \"active\" : \"\" );\n        var btnStyle = {width:\"100%\", fontSize:\"15px\", color:\"#333\", border:\"1px solid #ccc\"};\n        btnStyle.color = (activeFlag === \"active\" ? \"#990000\" : \"#333\");\n        btnStyle.background = (activeFlag === \"active\" ? \"#fff\" : \"#eee\");\n        btnStyle.borderBottom = (activeFlag === \"active\" ? \"1px solid #fff\" : \"1px solid #ccc\");\n        tabTitleList.push(\n                <li key={\"tab-\"+tabId} className=\"nav-item\" role=\"presentation\"\n                  style={{width:\"25%\"}}>\n                  <button className={\"nav-link \" + activeFlag}\n                  id={tabId + \"-tab\"}  data-bs-toggle=\"tab\"\n                  data-bs-target={\"#sample_view\"} type=\"button\" role=\"tab\" aria-controls={\"sample_view-cn\"} aria-selected=\"true\"\n                  style={btnStyle} onClick={this.handleTitleClick}\n                >\n                  {tabHash[tabId].title}\n                </button>\n              </li>\n        );\n        tabContentList.push(\n                <div key={\"formcn-\"+tabId}\n                  className={\"tab-pane fade show  leftblock \" + activeFlag}\n                  id={tabId+\"-cn\"} role=\"tabpanel\" aria-labelledby={tabId + \"-tab\"}\n                  style={{width:\"100%\",  padding:\"20px\", background:\"#fff\"}}>\n                  {tabHash[tabId].cn}\n                </div>);\n    }\n\n\n    var tabsCn = (\n            <div id=\"tabcn\" className=\"leftblock\" style={{width:\"100%\", display:\"none\", margin:\"20px 0px 0px 0px\"}}>\n              <ul className=\"nav nav-tabs\" id=\"myTab\" role=\"tablist\" style={{width:\"100%\"}}>\n                {tabTitleList}\n              </ul>\n              <div className=\"tab-content\" id=\"myTabContent\"\n                  style={{width:\"100%\", margin:\"20px 0px 0px 0px\"}}>\n                {tabContentList}\n              </div>\n          </div>);\n\n\n     var affOptions = [];\n    for (var i in this.props.initObj.affilations){\n      var obj = this.props.initObj.affilations[i];\n      affOptions.push(<option value={obj.id}>{obj.label}</option>);\n    }\n\n    var formCn = this.getFormCn();\n\n    return (\n      <div className=\"pagecn\" style={{border:\"0px dashed red\", zIndex:100}}>\n        <Alertdialog dialog={this.state.dialog} onClose={this.handleDialogClose}/>\n        <div className=\"leftblock\" style={{width:\"100%\", \n          margin:\"60px 0px 0px 0px\", \n          fontSize:\"17px\", borderBottom:\"1px solid #ccc\"}}>\n          <DoubleArrowOutlinedIcon style={{color:\"#2358C2\", fontSize:\"17px\" }}/>\n          &nbsp;\n          <Link to=\"/\" className=\"reglink\">HOME </Link> \n            &nbsp; / &nbsp;\n          <Link to={\"/uploads\"} className=\"reglink\">GLYCAN FINDER</Link> \n        </div>\n        \n        {formCn}\n        <div className=\"leftblock\" style={{width:\"100%\",margin:\"15px 0px 0px 0px\",\n            borderBottom:\"1px solid #ccc\"}}></div>\n       <div className=\"leftblock\" style={{width:\"100%\", margin:\"40px 0px 0px 0px\", \n           border:\"0px dashed orange\"}}>\n          {tabsCn}\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default GlycanFinder;\n\n","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/static_page.jsx",["132"],"import React, { Component } from \"react\";\nimport Alertdialog from './dialogbox';\nimport Loadingicon from \"./loading_icon\";\nimport * as LocalConfig from \"./local_config\";\nimport { Link } from \"react-router-dom\";\nimport DoubleArrowOutlinedIcon from '@material-ui/icons/DoubleArrowOutlined';\nimport { Markup } from 'interweave';\n\nimport $ from \"jquery\";\n\n\nclass StaticPage extends Component {\n  \n  state = {\n    tabidx:\"sampleview\",\n    dialog:{\n      status:false, \n      msg:\"\"\n    }\n  };\n\n  \n\n  handleDialogClose = () => {\n    var tmpState = this.state;\n    tmpState.dialog.status = false;\n    this.setState(tmpState);\n  }\n\n  componentDidMount() {\n\n    $(document).on('click', '.faqquestion', function (event) {\n        event.preventDefault();\n        var jqId = \"#answer_\" + this.id.split(\"_\")[1];\n        $(jqId).toggle();\n    });\n\n    var reqObj = {pageid:this.props.pageId};\n    const requestOptions = { \n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_static_content;\n\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          var tmpState = this.state;\n          tmpState.response = result;\n          tmpState.isLoaded = true;          \n          if (tmpState.response.status == 0){\n            tmpState.dialog.status = true;\n            tmpState.dialog.msg = tmpState.response.error;\n          }\n          console.log(\"Request:\",svcUrl);\n          console.log(\"AAAA\", result);\n          this.setState(tmpState);\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n  }\n\n\n  handleTitleClick = (e) => {\n\n    var tmpState = this.state;\n    tmpState.tabidx = e.target.id.split(\"-\")[0];\n    this.setState(tmpState);\n  };\n\n\n\n  render() {\n\n    if (!(\"response\" in this.state)){\n      return <Loadingicon/>\n    }\n    var pageIdLabel = this.props.pageId.toUpperCase();\n    var pageCn = ( this.state.dialog.status === true ? \"no content found\" : this.state.response.record.cn);\n\n    return (\n      <div className=\"pagecn\">\n        <Alertdialog dialog={this.state.dialog} onClose={this.handleDialogClose}/>\n        <div className=\"leftblock\" style={{width:\"100%\", \n          margin:\"60px 0px 0px 0px\", \n          fontSize:\"17px\", borderBottom:\"1px solid #ccc\"}}>\n          <DoubleArrowOutlinedIcon style={{color:\"#2358C2\", fontSize:\"17px\" }}/>\n          &nbsp;\n          <Link to=\"/\" className=\"reglink\">HOME </Link> \n            &nbsp; / &nbsp;\n          <Link to={\"/static/\"+this.props.pageId} className=\"reglink\">{pageIdLabel}</Link> \n        </div>\n\n        <div className=\"leftblock\" style={{width:\"100%\", margin:\"40px 0px 0px 0px\"}}>\n          <Markup content={pageCn}/>\n        </div>\n\n\n      </div>\n    );\n  }\n}\n\nexport default StaticPage;\n","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/loading_icon.jsx",[],"/data/shared/repos/glygen-backend-datasetviewer/app/src/components/local_config.jsx",[],"/data/shared/repos/glygen-backend-datasetviewer/app/src/components/footer.jsx",["133","134","135","136"],"/data/shared/repos/glygen-backend-datasetviewer/app/src/components/header.jsx",["137","138","139","140","141","142"],"import React, { Component } from \"react\";\n//import Navbar from 'navbar-react'\n//import { Container} from 'react-containers';\nimport { Form, FormControl, Container, Button, Navbar, Nav, NavItem, NavDropdown, MenuItem } from 'react-bootstrap';\nimport { Markup } from 'interweave';\n\n\nclass Header extends Component {\n\n  \n\n\n  render() {\n\n    var navbarStyle =  { minHeight:\"80px\"}\n    var server = process.env.REACT_APP_SERVER;\n    if (server !== \"prd\"){\n      navbarStyle.backgroundImage = 'url(\"/imglib/watermark.'+server+'.png\")';\n    }\n    var moduleUrlDict = this.props.initObj.module_urls;\n\n    console.log(\"headerlinks\", this.props.initObj);\n    var pageId = window.location.href.split(\"/\")[3];\n    pageId = (pageId.trim() === \"\" ? \"home\" : pageId);\n    var sOne = {color:\"#ccc\", margin:\"0 20px 0px 0px\"};\n    var sTwo = {color:\"#fff\", margin:\"0 20px 0px 0px\"};\n    var headerLinks = [];\n    for (var i in this.props.initObj.headerlinks){\n      var obj = this.props.initObj.headerlinks[i];  \n      var s = (obj.id === pageId ? sOne : sTwo);\n      if ([\"api\", \"portal\", \"sparql\"].indexOf(obj.id) !== -1){\n          obj.url = moduleUrlDict[server][obj.id];\n          //alert(obj.id + ':' + obj.url);\n      }\n      headerLinks.push(<Nav.Link id={\"link_\" +obj.id} key={\"link_\" +obj.id} href={obj.url} style={{fontWeight:\"bold\"}} style={s}>{obj.label}</Nav.Link>)\n    }\n    \n    var logoUrl = moduleUrlDict[server][\"portal\"];\n\n    return (\n      <Navbar className=\"globalheader\"  variant=\"dark\" expand=\"lg\" \n        style={navbarStyle}\n        >\n        <Container fluid>\n          <Navbar.Brand href={logoUrl} className=\"globalheader_logo\">\n            <Markup content={this.props.initObj.logo}/>\n          </Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"navbarScroll\" />\n          <Navbar.Collapse id=\"navbarScroll\">\n            <Nav className=\"me-auto my-2 my-lg-0\" navbarScroll style={{fontSize:\"22px\", margin:\"0px 0px 0px 30px\"}}>\n              {headerLinks}\n              <NavDropdown title=\"About\" id=\"navbarScrollingDropdown\"\n                style={{display:\"none\"}}\n              >\n                <NavDropdown.Item href=\"/static//workflow\">Integration Workflow</NavDropdown.Item>\n                <NavDropdown.Divider />\n                <NavDropdown.Item href=\"#action6\">\n                  Data Version 1.1\n                </NavDropdown.Item>\n                <NavDropdown.Item href=\"#action6\">\n                  Website Version 1.1\n                </NavDropdown.Item>\n              </NavDropdown>\n            </Nav>\n          </Navbar.Collapse>\n        </Container>\n      </Navbar>\n    );\n  }\n}\n\nexport default Header;\n","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/gsd.jsx",["143","144","145","146","147","148"],"import React, { Component } from \"react\";\nimport Alertdialog from './dialogbox';\nimport Loadingicon from \"./loading_icon\";\nimport * as LocalConfig from \"./local_config\";\nimport { Chart } from \"react-google-charts\";\nimport { Link } from \"react-router-dom\";\nimport DoubleArrowOutlinedIcon from '@material-ui/icons/DoubleArrowOutlined';\nimport { Markup } from 'interweave';\nimport $ from \"jquery\";\nimport {sortReleaseList, verifyReqObj} from \"./util\";\nimport formHash from \"../jsondata/form_submissions.json\";\nimport Formeditor from \"./form_editor\";\n\n\nvar verInfo = {};\n\n\nclass Gsd extends Component {\n  \n  state = {\n    ver:\"\",\n    tabidx:\"sampleview\",\n    pageid:\"submit\",\n    dialog:{\n      status:false, \n      msg:\"\"\n    }\n  };\n\n  \n  handleDialogClose = () => {\n    var tmpState = this.state;\n    tmpState.dialog.status = false;\n    this.setState(tmpState);\n  }\n\n\n  handleSubmit = () => {\n    \n    document.body.scrollTop = document.documentElement.scrollTop = 0;\n\n    var jqClass = \".submissionsform\";\n    var reqObj = {};\n    var selectedForm = formHash[\"step_one\"];\n    $(jqClass).each(function () {\n        var fieldName = $(this).attr(\"id\");\n        var fieldValue = $(this).val();\n        for (var i in selectedForm.groups){\n            for (var j in selectedForm.groups[i].emlist){\n              var emObj = selectedForm.groups[i].emlist[j];\n              if (fieldName === emObj.emid){\n                if (emObj.datatype.split(\"|\")[1] === \"int\"){\n                  fieldValue = parseInt(fieldValue);\n                }\n                reqObj[fieldName] = fieldValue;\n                if (emObj.emtype === \"select\"){\n                  emObj.value.selected = fieldValue;\n                }\n                else{\n                  emObj.value = fieldValue;\n                }\n              }\n            }\n        }\n        //$(this).val(\"\");\n    });\n\n    var errorList = verifyReqObj(reqObj, selectedForm);\n    if (errorList.length !== 0) {\n      var tmpState = this.state;\n      tmpState.dialog.status = true;\n      tmpState.dialog.msg = <div><ul> {errorList} </ul></div>;\n      this.setState(tmpState);\n      return;\n    }\n\n\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = LocalConfig.apiHash.gsd_submit;\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          var tmpState = this.state;\n          tmpState.response = result;\n          tmpState.isLoaded = true;\n          if (tmpState.response.status === 0){\n            tmpState.dialog.status = true;\n            tmpState.dialog.msg = tmpState.response.error;\n          }\n          tmpState.pageid = \"confirmation\";\n          this.setState(tmpState);\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n          //console.log(\"Ajax error:\", error);\n        }\n      );\n\n\n  }\n  \n  setFormValues = () => {\n    for (var k in formHash){\n      for (var i in formHash[k][\"groups\"]){\n        for (var j in formHash[k][\"groups\"][i][\"emlist\"]){\n          var emObj = formHash[k][\"groups\"][i][\"emlist\"][j];\n          if (emObj.emid === \"submitbtn\"){\n            //var f = (emObj.value === \"Back\" ? this.handleBack : this.handleNext);\n            emObj.onclick = eval(emObj.onclick);\n          }\n        }\n      }\n    }\n\n  }\n\n  setPageId = () => {\n\n\n    var selectedForm = formHash[\"step_one\"];\n    for (var i in selectedForm.groups){\n      for (var j in selectedForm.groups[i].emlist){\n        var emObj = selectedForm.groups[i].emlist[j];\n        if (emObj.datatype.indexOf(\"string\") !== -1){\n          emObj.value = \"\";\n        }\n      }\n    }\n\n    var tmpState = this.state;\n    tmpState.pageid = \"submit\";\n    this.setState(tmpState);\n\n  }\n\n\n  render() {\n\n    //if (!(\"response\" in this.state)){\n    //  return <Loadingicon/>\n    //}\n \n\n    this.setFormValues();\n    var k = \"step_one\";\n    var cn = (<div><Formeditor formClass={formHash[k].class} formObj={formHash[k]}/></div>)\n    if (this.state.pageid === \"confirmation\"){\n        cn = (<div>\n          <br/><br/>\n          Success, thank you for your submission! <Link to=\"/gsd\" onClick={this.setPageId} className=\"reglink\">Click here</Link> to submit another term.\n          </div>);\n    }\n\n    return (\n      <div className=\"pagecn\">\n        <Alertdialog dialog={this.state.dialog} onClose={this.handleDialogClose}/>\n        <div className=\"leftblock\" style={{width:\"100%\", \n          margin:\"60px 0px 0px 0px\", \n          fontSize:\"17px\", borderBottom:\"1px solid #ccc\"}}>\n          <DoubleArrowOutlinedIcon style={{color:\"#2358C2\", fontSize:\"17px\" }}/>\n          &nbsp;\n          <Link to=\"/\" className=\"reglink\">HOME </Link> \n            &nbsp; / &nbsp;\n          <Link to=\"/gsd\" className=\"reglink\">GSD Submission</Link> \n        </div>\n\n        <div className=\"leftblock\" \n          style={{width:\"100%\", margin:\"20px 0px 0px 0px\"}}>\n          {cn}\n        </div>\n        \n      </div>\n    );\n  }\n}\n\nexport default Gsd;\n","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/dataset_page.jsx",["149","150","151","152","153","154","155","156","157","158"],"import React, { Component } from \"react\";\nimport Alertdialog from './dialogbox';\nimport Loadingicon from \"./loading_icon\";\nimport * as LocalConfig from \"./local_config\";\n//import { Chart } from \"react-google-charts\";\nimport Tableview from \"./table\";\nimport {getColumns} from \"./columns\";\n\nimport { Link, useLocation } from \"react-router-dom\";\n\nimport DoubleArrowOutlinedIcon from '@material-ui/icons/DoubleArrowOutlined';\nimport { Markup } from 'interweave';\nimport $ from \"jquery\";\nimport {sortReleaseList} from \"./util\";\n\nimport download from \"downloadjs\";\n\n\n\n\nvar verInfo = {};\n\nclass DatasetPage extends Component {\n  \n  state = {\n    ver:\"\",\n    bco:{},\n    tabidx: this.props.rowList.length > 0 ? \"resultview\" : \"contentview\",\n    dialog:{\n      status:false, \n      msg:\"\"\n    }\n  };\n\n\n  \n  handleDialogClose = () => {\n    var tmpState = this.state;\n    tmpState.dialog.status = false;\n    this.setState(tmpState);\n  }\n\n  handleVersion = () => {\n    var ver = $(\"#verselector\").val();\n    var reqObj = { bcoid:this.props.bcoId, dataversion:ver};\n    this.fetchPageData(reqObj);\n    var tmpState = this.state;\n    tmpState.ver = ver;\n    this.setState(tmpState);\n  }\n\n  componentDidMount() {\n    var rowList = (this.props.rowList === undefined ? [] : this.props.rowList);\n    var reqObj = { \n      bcoid:this.props.bcoId, \n      rowlist:this.props.rowList,\n      dataversion:this.props.initObj.dataversion\n    };\n    this.fetchPageData(reqObj); \n  }\n\n\n\n  fetchPageData(reqObj){\n\n\n    const requestOptions = { \n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_detail;\n\n\n    fetch(svcUrl, requestOptions).then((res) => res.json()).then(\n        (result) => {\n            //console.log(\"Request:\",svcUrl);\n            //console.log(\"Ajax response:\", result);\n            var tmpState = this.state;\n            tmpState.response = result;\n            tmpState.bco = result.record.bco;\n            tmpState.isLoaded = true;          \n            if (tmpState.response.status === 0){\n                tmpState.dialog.status = true;\n                tmpState.dialog.msg = tmpState.response.error;\n            }\n            this.setState(tmpState);\n        },\n        (error) => { \n            this.setState({isLoaded: true,error,});\n        }\n    );\n\n  }\n\n handleDownloadBco = (e) => {\n    e.preventDefault();\n    var buffer = JSON.stringify(this.state.bco, null, 2);\n    download(new Blob([buffer]), this.props.bcoId + \".json\", \"text/plain\");\n }\n\n handleDownloadMatchedRecords = (e) => {\n    e.preventDefault();\n    var rowList = (this.props.rowList === undefined ? [] : this.props.rowList);\n    var reqObj = {\n      bcoid:this.props.bcoId,\n      rowlist:this.props.rowList,\n      dataversion:this.props.initObj.dataversion\n    };\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_download;\n    fetch(svcUrl, requestOptions).then((res) => res.json()).then(\n        (result) => {\n            //console.log(\"Request:\",svcUrl);\n            //console.log(\"DDDDD:\", result);\n            if (result.status === 0){\n                var tmpState = this.state; \n                tmpState.isLoaded = true;\n                tmpState.dialog.status = true;\n                tmpState.dialog.msg = result.error;\n                this.setState(tmpState);\n            }\n            else{\n                var buffer = \"\";\n                for (var i in result.rowlist){\n                    var row = result.rowlist[i];\n                    buffer += row.join(\"\\t\") + \"\\n\";\n                }\n                download(new Blob([buffer]), \"matched_records.tsv\", \"text/plain\");\n            }\n        },\n        (error) => {\n            this.setState({isLoaded: true,error,});\n        }\n    );   \n\n }\n\n\n  handleTitleClick = (e) => {\n\n    var tmpState = this.state;\n    tmpState.tabidx = e.target.id.split(\"-\")[0];\n    this.setState(tmpState);\n  };\n\n\n  getTableView = (tableData) => {\n\n    var tableCols = [];\n    var tableRows = [];\n    for (var i in tableData){\n      var row =  tableData[i];\n      if (i == 0){\n        for (var j in row){\n          var f = (j == 0 ? \"id\" : row[j]);\n          tableCols.push({\n              field:f, headerName:f, minWidth:225, headerClassName:\"dgheader\",\n              cellClassName:\"dgcell\"});\n        }\n      }\n      else{\n        var o = {}\n        for (var j in row){\n          var f = (j == 0 ? \"id\" : tableData[0][j]);\n          o[f] = row[j];\n        }\n\ttableRows.push(o)\n      }\n    }\n    console.log(\"rows-1\",tableRows);\n    return (<Tableview cols={tableCols} rows={tableRows}/>);\n  }\n\n\n\n  render() {\n\n    if (!(\"response\" in this.state)){\n      return <Loadingicon/>\n    }\n    \n    const resObj = (this.state.response !== undefined ? this.state.response : {});\n    const extractObj = (\"record\" in resObj ? resObj.record.extract : undefined);\n    const bcoObj = (\"record\" in resObj ? resObj.record.bco : undefined);\n    const historyObj = (\"record\" in resObj ? resObj.record.history : undefined);\n  \n\n    var readMe = (extractObj !== undefined ? extractObj.readme : undefined); \n    var downloadUrl = (extractObj !== undefined ? extractObj.downloadurl : undefined);\n    var bcoTitle = (extractObj !== undefined ? extractObj.title : undefined);\n    //var bcoDescription = (extractObj !== undefined ? extractObj.description : undefined);\n    var bcoDescription = \"\";\n    if (bcoObj !== undefined){\n        bcoDescription = bcoObj[\"usability_domain\"].join(\" \");\n    }\n\n    var tabHash = {};\n    if (this.props.rowList.length > 0){\n      tabHash[\"resultview\"] = {title:\"Matched Records\", cn:\"\"};\n      if (extractObj !== undefined){\n        if(extractObj.resultdata.type === \"table\"){\n          tabHash.resultview.cn = (<div>{this.getTableView(extractObj.resultdata.data)}</div>);\n        }\n        else{\n          tabHash.resultview.cn = (\n            <div style={{fontSize:\"14px\"}}><pre>{extractObj.resultdata.data}</pre></div>\n          );\n        }\n      }\n    }\n    \n    tabHash[\"contentview\"] = {title:\"All Records\",cn:\"\"};\n    if (extractObj !== undefined){\n      if(extractObj.alldata.type === \"table\"){\n        tabHash.contentview.cn = this.getTableView(extractObj.alldata.data);\n      }\n      else{\n        tabHash.contentview.cn = (\n          <div style={{fontSize:\"14px\"}}><pre>{extractObj.alldata.data}</pre></div>\n        );\n      }\n    }\n\n    tabHash[\"bcoview\"] = {\n      title:\"BCO JSON\",\n      cn:(<pre style={{whiteSpace:\"pre-wrap\"}}>{JSON.stringify(bcoObj, null, 4)}</pre>)\n    };\n    tabHash[\"readme\"] = {title:\"README\",cn:(<pre>{readMe}</pre>)};\n\n\n    var downloadItems = [];\n    downloadItems.push(<li><Link to={\"#\"} className=\"reglink\" onClick={this.handleDownloadBco}>Download BCO</Link></li>);\n    if (this.props.rowList.length > 0) {\n        downloadItems.push(<li><Link to={\"#\"} className=\"reglink\" onClick={this.handleDownloadMatchedRecords}>Download matched records</Link></li>);\n\n    }\n    downloadItems.push(<li><Link to={downloadUrl} className=\"reglink\" target=\"_\">Download dataset file</Link></li>);\n    tabHash[\"downloads\"] = {title:\"DOWNLOADS\",cn:(<ul style={{margin:\"20px 0px 100px 20px\"}}>{downloadItems}</ul>)};\n\n\n    var tabTitleList= [];\n    var tabContentList = [];\n    for (var tabId in tabHash){\n        var activeFlag = (tabId === this.state.tabidx ? \"active\" : \"\" );\n        var btnStyle = {width:\"100%\", fontSize:\"15px\", color:\"#333\", border:\"1px solid #ccc\"};\n        btnStyle.color = (activeFlag === \"active\" ? \"#990000\" : \"#333\");\n        btnStyle.background = (activeFlag === \"active\" ? \"#fff\" : \"#eee\");\n        btnStyle.borderBottom = (activeFlag === \"active\" ? \"1px solid #fff\" : \"1px solid #ccc\");\n        tabTitleList.push(\n          <li key={\"tab-\"+tabId} className=\"nav-item\" role=\"presentation\" \n            style={{width:\"20%\"}}>\n            <button className={\"nav-link \" + activeFlag} \n            id={tabId + \"-tab\"}  data-bs-toggle=\"tab\" \n            data-bs-target={\"#sample_view\"} type=\"button\" role=\"tab\" aria-controls={\"sample_view-cn\"} aria-selected=\"true\"\n            style={btnStyle} onClick={this.handleTitleClick}\n            >\n             {tabHash[tabId].title}  \n            </button>\n        </li>\n      );\n      tabContentList.push(\n        <div key={\"formcn-\"+tabId} \n          className={\"tab-pane fade show  leftblock \" + activeFlag} \n          id={tabId+\"-cn\"} role=\"tabpanel\" aria-labelledby={tabId + \"-tab\"}\n          style={{width:\"100%\",  padding:\"20px\", background:\"#fff\"}}>\n          {tabHash[tabId].cn}\n        </div>\n      );\n    }\n\n    var selectedFileName = \"\";\n    var verSelector = \"\";\n    if (historyObj !== undefined){\n      var verOptions = [];\n      //var verList = sortReleaseList(Object.keys(historyObj), false);\n      var verList = sortReleaseList(this.props.initObj.versionlist, false);\n      var selectedVer = (this.state.ver !== \"\" ? this.state.ver.split(\".\").join(\"_\") : verList[0].split(\".\").join(\"_\"));\n      for (var i in verList ){\n        var ver = verList[i].split(\".\").join(\"_\");\n        if (ver in historyObj){\n            verInfo[ver] = historyObj[ver];\n        }\n        if (ver in verInfo){\n          var verLbl = ver.split(\"_\").join(\".\") ;\n          var lbl = \"version \" + verLbl + \" released on \" + verInfo[ver].release_date \n          lbl += \" -- \" + verInfo[ver].id_count + \" record IDs \";\n          if (verInfo[ver].ids_added > 0){\n            lbl +=  \", \" + verInfo[ver].ids_added + \" added\";\n          }\n          else if (verInfo[ver].ids_removed > 0){\n            lbl +=  \", \" + verInfo[ver].ids_removed + \" removed\";\n          }\n          verOptions.push(<option value={verLbl}>{lbl}</option>);\n        }\n      }\n      selectedFileName = \"Sample view for \" + verInfo[selectedVer].file_name;\n      var s = {width:\"50%\"};\n      verSelector = (<select id=\"verselector\" className=\"form-select\" style={s} onChange={this.handleVersion}>{verOptions}</select>);\n    }\n\n\n    return (\n      <div className=\"pagecn\">\n        <Alertdialog dialog={this.state.dialog} onClose={this.handleDialogClose}/>\n        <div className=\"leftblock\" style={{width:\"100%\", borderBottom:\"1px solid #ccc\"}}>\n          <DoubleArrowOutlinedIcon style={{color:\"#2358C2\", fontSize:\"17px\" }}/>\n          &nbsp;\n          <Link to=\"/\" className=\"reglink\">HOME </Link> \n            &nbsp; / &nbsp;\n          <Link to={\"/\"+this.props.bcoId} className=\"reglink\">{this.props.bcoId}</Link> \n        </div>\n        <div className=\"leftblock\" style={{width:\"100%\", margin:\"40px 0px 0px 0px\"}}>\n          <span>{selectedFileName}</span><br/>\n          <span>{verSelector}</span><br/>\n          <span style={{fontWeight:\"bold\"}}>{bcoTitle}</span><br/>\n          <span>{bcoDescription}</span><br/>\n        </div>\n\n        <div className=\"leftblock\" \n          style={{width:\"100%\", margin:\"20px 0px 0px 0px\"}}>\n          <ul className=\"nav nav-tabs\" id=\"myTab\" role=\"tablist\" \n            style={{width:\"70%\", border:\"0px dashed orange\"}}>\n            {tabTitleList}\n          </ul>\n          <div className=\"tab-content\" id=\"myTabContent\" \n            style={{width:\"100%\", margin:\"20px 0px 0px 0px\"}}>\n            {tabContentList}\n          </div>\n        </div>\n\n       \n\n        \n\n        \n      </div>\n    );\n  }\n}\n\nexport default DatasetPage;\n","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/filter.jsx",["159","160","161","162"],"import React, { Component } from \"react\";\nimport { Markup } from 'interweave';\n\n\nclass Filter extends Component {\n  \n\n  render() {\n    var filterInfo = this.props.filterinfo;\n\n\n    var divList = [];\n    var catList = Object.keys(filterInfo).sort()\n    if (catList.indexOf(\"species\") !== -1){\n        const idx = catList.indexOf(\"species\");\n        const x = catList.splice(idx, 1);\n        catList.unshift(\"species\");\n    }\n\n    for (var c in catList) {\n      var catName = catList[c];\n      var catNameLbl = catName.substr(0,1).toUpperCase() + catName.substr(1);\n      catNameLbl = catNameLbl.replace(\"_\", \" \");\n      var rList = [];\n      var countDict = filterInfo[catName];\n      var catValList = Object.keys(countDict).sort();\n      //for (var catVal in countDict){\n      for (var j in catValList){\n        var catVal = catValList[j];\n        var count = countDict[catVal]\n        var combo = catName + \"|\" + catVal;\n        var catValLbl = catVal.substr(0,1).toUpperCase() + catVal.substr(1);\n        if (catName === \"file_type\"){\n          catValLbl = catVal.toUpperCase();\n        }\n\n        var isChecked = (this.props.filterlist.indexOf(combo) === -1 ? false : true)\n        rList.push(<tr>\n            <td valign=\"top\" style={{paddingLeft:\"10px\"}}>\n              <input name=\"filtervalue\" type=\"checkbox\" checked={isChecked} value={combo} onClick={this.props.handleFilterApply}/></td>\n            <td valign=\"top\" style={{paddingLeft:\"10px\", fontSize:14}}>{catValLbl} ({count})</td>\n          </tr>);\n      }\n      divList.push(\n        <div className=\"filter_div_two\">\n          <table style={{padding:\"0px 0px 0px 10px\"}}>\n            <tr><td colspan=\"2\" style={{fontWeight:\"bold\", height:40}}>By {catNameLbl}</td></tr>\n            {rList}\n          </table>\n        </div>\n      );\n    }\n\n\n    var btnStyle = {display: \"block\",float: \"right\",marginRight: \"10px\",fontSize: \"14px\"};\n    var iconStyle = {display:\"none\",color:\"#555\", float:\"right\", width:\"25px\",  marginLleft:\"3px\"};\n    var msgStyle = { display: \"block\", float: \"left\", fontSize: \"12px\", margin: \"5px 0px 0px 5px\"};\n\n    return (\n      <div className=\"leftblock filter_div_one\">\n          <div id=\"filtercn\" >\n            {divList}\n          </div>\n        <div className=\"filterbtnscn\">\n            <button onClick={this.props.handleFilterReset}\n                className=\"btn btn-outline-secondary\" style={btnStyle}>Reset</button>\n            <button onClick={this.props.handleFilterApply}\n                className=\"btn btn-outline-secondary\" style={btnStyle}>Apply</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Filter;\n","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/search_box.jsx",[],"/data/shared/repos/glygen-backend-datasetviewer/app/src/components/table.jsx",["163","164","165","166"],"import * as React from 'react';\nimport { Link } from \"react-router-dom\";\nimport Box from '@mui/material/Box';\nimport Typography from \"@material-ui/core/Typography\";\nimport { DataGrid, GridColDef, GridValueGetterParams } from '@mui/x-data-grid';\n\n\nexport default function Tableview(props) {\n  \n  var boxStyle = {\n      height: 1000, width: '100%',  background:\"#fff\"\n  };\n\n  console.log(\"rows-2\",props.rows);\n  return (\n    <Box sx={boxStyle}>\n      <DataGrid\n        rows={props.rows}\n        columns={props.cols}\n        initialState={{\n          pagination: {\n            paginationModel: {\n              pageSize: 100,\n            },\n          },\n        }}\n        pageSizeOptions={[10, 50, 100]}\n        disableRowSelectionOnClick\n        enableColumnAutosize={true}\n        getRowHeight={() => 'auto'}  \n    />\n    </Box>\n  );\n}\n\n","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/columns.jsx",[],"/data/shared/repos/glygen-backend-datasetviewer/app/src/components/util.jsx",["167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199"],"import $ from \"jquery\";\nimport React from 'react';\nimport { Link } from \"react-router-dom\";\n\n\nexport function verifyReqObj (reqObj, formObj){\n\n    var typeList = [\"text\", \"int\", \"float\", \"select\", \"textarea\", \"stringlist\", \"obj\", \"objlist\"];\n    var errorList = [];\n    for (var i in formObj.groups){\n      var grpObj = formObj.groups[i];\n      for (var j in grpObj.emlist){\n        var obj = grpObj.emlist[j];\n        var emId = obj.emid;\n        var emValue =  obj.value;\n        var emLbl = obj.label;\n        if (typeList.indexOf(obj.emtype) === -1){\n            continue;\n        }\n        else if (obj.required === true && [\"stringlist\", \"objlist\"].indexOf(obj.emtype) !== -1){\n          if (emValue === undefined){\n            errorList.push(<li key={\"error_in_\" + emId}>\"{emLbl}\" cannot be empty value</li>);\n          }\n          else if (emValue.length === 0){\n            errorList.push(<li key={\"error_in_\" + emId}>\"{emLbl}\" cannot be empty value</li>);\n          }\n        }\n        else if (obj.required === true && reqObj[emId] == null){\n          errorList.push(<li key={\"error_in_\" + emId}>\"{emLbl}\" cannot be empty value</li>);\n        }\n        else if (obj.required === true && obj[\"datatype\"].split(\"|\")[1] === \"int\" && isNaN(reqObj[emId])){\n          errorList.push(<li key={\"error_in_\" + emId}>\"{emLbl}\" cannot be empty value</li>);\n        }\n        else if (obj.required === true && reqObj[emId].toString() === \"\" ){\n          errorList.push(<li key={\"error_in_\" + emId}>\"{emLbl}\" cannot be empty value</li>);\n        }\n        else if (\"datatype\" in obj){\n          if (obj[\"datatype\"].split(\"|\")[0] === \"number\"){\n            if (typeof(reqObj[emId]) !== obj[\"datatype\"].split(\"|\")[0]){\n              errorList.push(<li>\"{emLbl}\" type mismatch</li>);\n            }\n          }\n        }\n        //else{\n        //  console.log(\"FLAG-2\", emId, obj[\"datatype\"], emValue);\n        //}\n      }\n      //if (errorList.length === 0){\n      //  return errorList;\n      //}\n    }\n    return errorList;\n}\n\n\nexport function getStarList(starCount){\n\n  var starList = [];\n  for (var j =1; j <= 5; j++){\n    var fg = (j <= starCount ? \"#F5B041\" : \"#cccccc\");\n    var s = {cursor:\"pointer\",marginRight:\"1px\",fontSize:\"15px\", color:fg};\n    starList.push(<i key={\"s_\"+j} className=\"material-icons\" style={s}>star </i>)\n  }\n  return starList;\n}\n\n\nexport function filterObjectList(objList, filterList) {\n\n    var retObj = {filterinfo:{}, passedobjlist:[]};\n    for (var i in objList) {\n      var obj = objList[i];\n      var passCount = 0;\n      for (var name in obj.categories) {\n        if ([\"tags\",\"protein\"].indexOf(name) !== -1){\n          continue;\n        }\n        for (var q in obj.categories[name]){\n            var value = obj.categories[name][q].toLowerCase(); \n\n            var combo = name + \"|\" + value;\n            if (!(name in retObj.filterinfo)) {\n                retObj.filterinfo[name] = {};\n            }\n            if(true){\n                if (!(value in retObj.filterinfo[name])){\n                    retObj.filterinfo[name][value] = 1;\n                }\n                else{\n                retObj.filterinfo[name][value] += 1;\n                }\n            }\n            if (filterList.indexOf(combo) !== -1) {\n                passCount += 1;\n            }\n        }\n      }\n      if (filterList.length > 0) {\n        //if (passCount > 0){\n        if (passCount === filterList.length){\n            retObj.passedobjlist.push(obj);\n        }\n      } \n      else {\n        retObj.passedobjlist.push(obj);\n      }\n    }\n\n    return retObj;\n}\n\n\n\nexport function shortText(txt, txtLen) {\n  var shortText = \"\";\n  var parts = txt.split(\" \");\n  for (var j in parts) {\n    if (shortText.length < txtLen) {\n      shortText += parts[j] + \" \";\n    } else {\n      shortText += \" ...\";\n      break;\n    }\n  }\n  return shortText;\n}\n\n\n\nexport function rndrSearchResults(objList, startIdx, endIdx) {\n\n  \n  if (objList.length === 0){\n    return (\n    <div className=\"row\" style={{color:\"red\", padding:\"0px 0px 100px 20px\"}}>\n      No results found!\n      </div>);\n  }\n\n  var bcoPrefix = 'GLYG_';\n  var dsPrefix = 'DS_';\n\n  var cardList = [];\n  for (var i=startIdx - 1; i <= endIdx -1;  i++){\n    var obj = objList[i];\n    \n    var moleculeType = (\"molecule\" in obj[\"categories\"] ? obj[\"categories\"][\"molecule\"] : \"\");\n    var speciesType = (\"species\" in obj[\"categories\"] ? obj[\"categories\"][\"species\"] : \"\");\n    var fileType = (\"file_type\" in obj[\"categories\"] ? obj[\"categories\"][\"file_type\"] : \"\");\n    var statusType = (\"status\" in obj[\"categories\"] ? obj[\"categories\"][\"status\"] : \"\");\n\n    var objId = bcoPrefix + \"0000\".substring(0, 10 - String(obj[\"bcoid\"]).length) + String(obj[\"_id\"]);\n    objId = obj[\"bcoid\"].replace(bcoPrefix, dsPrefix);\n    var titleText = statusType + ' ' + moleculeType.toLowerCase();\n    titleText += ' dataset ' + objId + ' in ';\n    titleText += fileType.toUpperCase() + ' format.';\n    titleText += ' [' + speciesType + ']';\n\n    var imgCn = (\n      <div className=\"leftblock\" style={{width:\"50%\", margin:\"20px 25% 0px 25%\"}}>     \n        <img className=\"card-img-top\" src={\"/imglib/\" + obj.iconfilename}/>\n      </div>\n    );\n    if (\"minitable\" in obj){\n      imgCn = (\n        <div className=\"leftblock\" style={{width:\"80%\", margin:\"20px 10% 0px 10%\"}}>     \n          {rndrMiniTable(obj.minitable)}\n        </div>\n      );\n    }\n\n    cardList.push(\n      <div className=\"col-md-4\">\n        <div className=\"card mb-4 box-shadow\" style={{minWidth:\"350px\"}}>\n            <div className=\"leftblock\" \n              style={{width:\"90%\", textAlign:\"center\",  fontSize:\"15px\", margin:\"20px 5% 0px 5%\"}}>\n              {titleText}\n            </div>\n            <div className=\"leftblock\" \n              style={{width:\"90%\", textAlign:\"center\", margin:\"20px 5% 0px 5%\"}}>\n              <Link className=\"reglink\" to={objId} style={{fontWeight:\"bold\"}}>\n                {obj.title}\n              </Link>\n            </div>\n            {imgCn}\n            <div className=\"card-body\">\n              <p className=\"card-text\" style={{textAlign:\"center\"}}>{shortText(obj.description, 900)}</p>\n                <div className=\"leftblock\" \n                style={{width:\"100%\",textAlign:\"center\", margin:\"20px 0px 20px 0px\"}}>\n                  <Link className=\"reglink\" to={objId}>\n                    View Details\n                  </Link> \n                </div>\n                \n            </div>\n          </div>\n        </div>\n    );\n  }\n  return (<div className=\"row\">{cardList}</div>);\n}\n\n\n\nexport function sortReleaseList(tmpList, reversedFlag){        \n\n    var factorList = [1000000, 1000, 1];\n    var relDict = {};\n    for (var i in tmpList){\n        var rel = tmpList[i]\n        var parts = (rel.indexOf(\".\") !== -1 ? rel.split(\".\") : rel.split(\"_\"));\n        var ordr = 0;\n        for (var j in parts){\n            ordr += factorList[j]*parseInt(parts[j]);\n        }\n        relDict[ordr] = rel;\n    }\n\n    var releaseList = [];\n    var keyList = Object.keys(relDict).sort().reverse();\n    for (var i in keyList){\n        var ordr = keyList[i];\n        releaseList.push(relDict[ordr]);\n    }\n    \n    return releaseList;\n\n}\n\nexport function rndrMiniTable(inObj){\n\n  var s = \"\";\n  var rowList = [];\n  var cellList = [];\n  for (var j in inObj[\"headers\"]){\n    s = {textAlign:\"center\",fontWeight:\"bold\",padding:\"5px 0px 0px 0px\", border:\"1px solid #ccc\"};\n    cellList.push(<td key={\"cell_\"+j} style={s}>{inObj[\"headers\"][j]}</td>);\n  }\n  rowList.push(<tr style={{height:\"30px\"}}>{cellList}</tr>);\n  for (var i =0; i < inObj[\"content\"].length; i ++){\n    cellList = [];\n    for (var j in inObj[\"content\"][i]){\n      s = {textAlign:\"center\",padding:\"5px 0px 0px 0px\", border:\"1px solid #ccc\"};\n      cellList.push(<td key={\"cell_\"+i+j} style={s}>{inObj[\"content\"][i][j]}</td>);\n    }\n    rowList.push(<tr key={\"row_\"+i} style={{height:\"30px\"}}>{cellList}</tr>);\n  }\n  s = {width:\"100%\",fontSize:\"16px\",border:\"1px solid #ccc\"};\n  return (\n    <table style={s} align=\"center\" cellSpacing=\"1\">\n      <tbody>{rowList}</tbody>\n    </table>\n  );\n}\n\n\n\n\n\nexport function getFormElement(pathId, formObj,formClass, emValue){\n\n  pathId = pathId.replace(\".\", \"_\");\n\n\n  function handleChange (em) {\n  }\n\n\n\n\n  var basicTypeList = [\n      \"text\",\"password\", \"int\", \"float\", \"datetime\",\"radio\", \"select\", \"textarea\",\n      \"stringlist\"\n  ];\n\n  var emType = formObj.emtype;\n  var disableFlag = (formObj.disable === true ? true : false);\n\n\n  var em = \"\";\n  if ([\"text\",\"password\", \"int\", \"float\", \"datetime\"].indexOf(emType) !== -1){\n    var newType = ([\"int\", \"float\"].indexOf(emType) !== -1 ? \"number\": emType);\n    var em = [];\n    em.push(\n      <input tag={newType} key={pathId + \"_\" +newType +  \"_input\"}\n        maxLength={formObj.maxlength}  id={pathId} type={formObj.emtype}\n        className={\"form-control \" + formClass}\n        onChange={handleChange}\n        defaultValue={emValue || ''}\n        disabled={disableFlag}\n        placeHolder={formObj.placeholder}\n      />\n    );\n    if (\"description\" in formObj){\n      em.push(\n        <span id={\"desc_\"+pathId} style={{width:\"100%\", fontStyle:\"italic\"}}>\n        {formObj.description}\n        </span>\n      );\n    }\n  }\n  else if (emType === \"button\"){\n    em = [];\n    em.push(<button id={pathId} className={formObj.class}\n      onClick={formObj.onclick} disabled={disableFlag}>\n      {formObj.value}\n      </button>);\n  }\n  else if (emType === \"radio\"){\n    em = [];\n    em.push(\n      <input type={emType} tag={emType} key={pathId +\"_radio\"}\n        className={formClass} id={pathId} value={emValue} name={formObj.name}\n        checked={formObj.checked}\n        disabled={disableFlag}\n      />\n    );\n    em.push( <span style={{fontSize:\"16px\"}}>&nbsp;{formObj.label}<br/></span>);\n    if (\"description\" in formObj){\n      em.push(<div className=\"leftblock\" id={\"desc_\"+pathId}\n        style={{margin:\"0 0 0 20px\",width:\"100%\", fontStyle:\"italic\"}}>\n        {formObj.description}</div>);\n    }\n  }\n  else if (emType === \"textarea\"){\n    em = (\n      <textarea tag={emType} key={pathId +\"_textarea\"}\n        maxLength={formObj.maxlength} id={pathId}\n        className={\"form-control \" + formClass}\n        defaultValue={emValue || ''}\n        placeholder={formObj.placeholder}\n        disabled={disableFlag}\n        style={formObj.style}\n      >\n      </textarea>\n    );\n  }\n  else if (emType === \"plaintext\"){\n    em = (\n      <pre>{emValue}</pre>\n    );\n  }\n  else if (emType === \"select\"){\n    var optList = [];\n    for (var j in emValue.optlist){\n        const val = emValue.optlist[j].value;\n        const lbl = emValue.optlist[j].label;\n        const key = pathId + \"_\" + j + \"_\" + val + \"_opt\";\n        optList.push(<option key={key} value={val}>{lbl}</option>);\n    }\n    em = (\n        <select tag={emType} key={pathId + \"_select\"} id={pathId}\n          className={\"form-select \" + formClass}\n          defaultValue={emValue.selected || ''}\n          disabled={disableFlag}\n          onChange={formObj.onchange}\n        >\n          {optList}\n        </select>\n    );\n  }\n  else if (emType === \"stringlist\"){\n    var sTwo = {width:\"100%\", textAlign:\"left\", fontSize:\"12px\"};\n    var sThree = {margin:\"0px\", padding:\"0px\", fontSize:\"12px\", textDecoration:\"none\"};\n    var tmpList = [];\n    if(typeof(emValue) === \"object\"){\n      tmpList = emValue;\n    }\n    var spanList = [];\n    for (var i in tmpList){\n      var randStr = Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 16);\n      var childPathId = pathId + \"_\"+ i + \"_\" + randStr;\n      var divId = pathId + \"_\"+ i + \"_div\";\n      var btnId = pathId + \"^\"+ i + \"^btn\";\n      spanList.push(\n        <div id={divId} key={divId} className=\"leftblock\"\n          style={{width:\"100%\", padding:\"0px\",\n              marginBottom:\"3px\",border:\"1px solid #ccc\", borderRadius:\"10px\"}}>\n          <button id={btnId} key={btnId} className=\"btn btn-link rightblock\"\n            style={{color:\"#2358C2\", margin:\"10px 10px 0px 0px\",padding:\"0px\",\n            textDecoration:\"none\"}}\n            onClick={formObj.onremoveitem} > X\n          </button>\n          <input id={childPathId} key={childPathId} className={\"form-control \" + formClass}\n            type={\"text\"} defaultValue={tmpList[i] || ''}\n            disabled={true} style={formObj.style}\n          />\n        </div>\n      );\n    }\n    var divId = pathId + \"_last_div\";\n    var btnId = pathId + \"^addbtn\";\n    var inputId = pathId.replace(\"|\", \"_\") + \"_last\";\n\n    spanList.push(\n        <div id={divId} key={divId} className=\"leftblock\"\n          style={{width:\"100%\", padding:\"5px\",\n              marginBottom:\"3px\",border:\"1px solid #ccc\", borderRadius:\"10px\"}}>\n          <div className=\"leftblock\"  style={{width:\"80%\"}}>\n            <input id={inputId} key={inputId}\n              className={\"form-control \" + formClass}\n              maxLength={formObj.maxlength}\n              type={\"text\"} defaultValue={\"\"}\n              disabled={false}\n              placeholder={formObj.placeholder}\n            />\n          </div>\n          <div className=\"leftblock\" style={{margin:\"2px 0px 0px 5px\"}}>\n            <button id={btnId}\n              className=\"btn btn-outline-secondary btn-sm\"\n              onClick={formObj.onadditem}>Add\n            </button>\n          </div>\n        </div>\n    );\n    em = (\n      <div id={pathId + \"_div_xxx\"} key={pathId + \"_div_xx\"}\n        className=\"leftblock\" style={{width:\"100%\"}}>\n        {spanList}\n      </div>\n    );\n  }\n  else if (emType === \"obj\"){\n      var obj = emValue;\n      var spanList = [];\n      for (const j in formObj.proplist){\n          var childFormObj = formObj.proplist[j];\n          var childPropName = childFormObj.prop;\n          var childPropValue = obj[childPropName];\n          var childPropType = childFormObj.emtype;\n          var childPathId = pathId + \".\" + childPropName;\n          if(basicTypeList.indexOf(childPropType) !== -1){\n            if (childPropType === \"select\"){\n              childFormObj.value.selected = obj[childPropName];\n              childPropValue =  childFormObj.value;\n            }\n            var tmpEm = getFormElement(childPathId,childFormObj, formClass, childPropValue);\n            spanList.push(tmpEm);\n          }\n          else{\n            spanList.push(\n              <div key={childPathId + \"_divvv\"} className=\"leftblock\"\n              style={{width:\"98%\", margin:\"10px 10px 10px 5px\", padding:\"10px\"}}>\n                {\"exception: \" + childPropName}<br/>{JSON.stringify(obj[childPropName])}<br/>\n              </div>\n            );\n          }\n      }\n      em = (\n        <div key={pathId + \"_divone\"} className=\"leftblock\" style={{width:\"100%\", padding:\"0px 10px 20px 10px\",        marginBottom:\"10px\",border:\"1px solid #ccc\", borderRadius:\"10px\"}}>\n        {spanList}\n        </div>\n      );\n    }\n    else if (emType === \"objlist\"){\n      var sOne = {};\n      sTwo = {};\n      var typeMap = {};\n      var childPropList = [];\n      for (var i in formObj.proplist){\n        const o = formObj.proplist[i];\n        childPropList.push(o.prop);\n        var childPathId = pathId  + \"_\" + o.prop;\n        typeMap[childPathId] = o.emtype;\n        if (o.emtype === \"objlist\"){\n          for (var j in o.proplist){\n            const oo = o.proplist[j];\n            var grandChildPathId = childPathId + \"_\" + oo.prop;\n            typeMap[grandChildPathId] = oo.emtype;\n          }\n        }\n      }\n\n      var divList = [];\n      var spanList = [];\n      var lastSpanList = [];\n      for (const j in childPropList){\n        var childPropName = childPropList[j];\n        var childFormObj = formObj.proplist[j];\n        var childPathId = pathId + \"_last_\" + childPropName;\n        var childPropValue = \"\";\n        if (childFormObj.emtype === \"select\"){\n          childFormObj.value.selected = \"\";\n          childPropValue = childFormObj.value;\n        }\n        childFormObj.disable = false;\n        var tmpEm = getFormElement(childPathId,childFormObj, formClass,childPropValue);\n        lastSpanList.push(tmpEm);\n\n      }\n\n      for (const i in emValue){\n        //if (this.state.rmlist.indexOf(i) !== -1){continue;}\n        obj = emValue[i];\n        spanList[i] = [];\n        for (const j in childPropList){\n          var randStr = Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 16);\n          var childPropName = childPropList[j];\n          var childPathId = pathId + \"_\" + i + \"_\" + j + \"_\" + childPropName + ' _' + randStr;\n          var childTypePath = pathId + \"_\" + childPropName;\n          var childPropType = (childTypePath in typeMap ? typeMap[childTypePath] : \"\");\n          if(basicTypeList.indexOf(childPropType) !== -1){\n            childFormObj = formObj.proplist[j];\n            childPropValue = obj[childPropName];\n            //spanList[i][childPropName] = childPropValue;\n            if (childPropType === \"select\"){\n              childFormObj.value.selected = childPropValue;\n              childPropValue = childFormObj.value;\n            }\n            childFormObj.disable = true;\n            var tmpEm = getFormElement(childPathId,childFormObj, formClass, childPropValue);\n            //var s = {border:\"1px dashed green\"};\n            //var tmpEm = (<div className=\"leftblock\" style={s}>{childFormObj.label}</div>);\n            spanList[i].push(tmpEm);\n          }\n          else{\n            sOne = { width:\"98%\", margin:\"10px 10px 10px 5px\", padding:\"10px\"};\n            sTwo = {width:\"100%\", margin:\"0px\", padding:\"10px\", border:\"1px solid #ccc\", borderRadius:\"10px\"};\n            spanList[i].push(\n              <div key={childPathId + \"_divvv\"} className=\"leftblock\" style={sOne}>\n                {\"exception: \" + childPropName}<br/>{JSON.stringify(emValue[childPropName])}<br/>\n              </div>\n            );\n          }\n        }\n        var divId = pathId + \"_obj_\" + i + \"_div\";\n        var btnId = pathId + \"^obj^\" + i + \"^btn\";\n        divList.push(\n            <div id={divId} key={divId} className=\"leftblock\" style={formObj.wrapperstyle}>\n              <button id={btnId} key={btnId} className=\"btn btn-link rightblock\"\n                style={{color:\"#2358C2\", margin:\"5px 0px 0px 0px\",padding:\"0px\",\n                textDecoration:\"none\"}}\n                onClick={formObj.onremoveitem} > X\n            </button>\n            <div id={divId + \"_\" + i + \"_divtwo\"} key={divId + \"_\" + i +  \"_divtwo\"} className=\"leftblock\" style={{width:\"100%\"}}>\n            {spanList[i]}\n            </div>\n            </div>);\n      }\n      var divId = \"last_div\";\n      var btnId = pathId + \"^addbtn\";\n      divList.push(\n        <div id={divId} key={divId} className=\"leftblock\"\n          style={{width:\"100%\", padding:\"20px 10px 20px 10px\", margin:\"0px 0px 0px 0px\",\n              border:\"1px solid #ccc\", borderRadius:\"10px\"}}>\n          <div id={divId + \"_divtwo\"} key={divId + \"_divtwo\"}\n            className=\"leftblock\"          style={{width:\"100%\"}}>\n            {lastSpanList}\n          </div>\n          <div id={divId + \"_divthree\"} key={divId + \"_divthree\"}\n            className=\"leftblock\" style={{width:\"100%\", margin:\"10px 0px 0px 0px\"}}>\n            <button id={btnId}\n              className=\"btn btn-outline-secondary btn-sm\"\n                onClick={formObj.onadditem}>\n              Add\n            </button>\n          </div>\n        </div>\n      );\n      em = (\n        <div key={pathId + \"_objlist_div_one\"}  id={pathId + \"_objlist_one\"} className=\"leftblock\" style={{width:\"100%\", fontSize:\"12px\",background:\"#fff\", marginTop:\"0px\"}}>\n           {divList}\n        </div>\n      );\n    }\n\n\n\n\n  var sOuter = {width:\"100%\",  background:\"#fff\", padding:\"5px\", fontSize:\"12px\"};\n  if (\"style\" in formObj){\n    sOuter = formObj.style;\n  }\n  var sInner = { paddingRight:\"5px\", background:\"#fff\",  fontSize:\"12px\"};\n\n  var passwordStrengthLbl = \"\";\n  //if (pathId === \"password_one\"){\n  //  passwordStrengthLbl = <div id={\"lbl_\"+pathId} className=\"leftblock\" style={sInner} >\n  //    </div>;\n  //}\n\n  var rqrd = (formObj.required === true ? \"*\" : \"\");\n  var lblDiv = (<div id={\"lbl_\"+pathId} className=\"leftblock\" style={sInner} >{formObj.label}\n    <span style={{color:\"red\"}}> {rqrd}</span> </div>);\n  if (emType === \"radio\"){lblDiv = \"\";}\n  return (\n    <div className=\"leftblock\" key={pathId +\"_\" + emType} style={sOuter}>\n      {lblDiv} {passwordStrengthLbl} {em }\n    </div>\n  );\n}\n\n\n","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/form_editor.jsx",["200","201","202","203","204"],"import React, { Component } from \"react\";\nimport { Markup } from 'interweave';\nimport {getFormElement} from './util';\nimport $ from \"jquery\";\n\n\nclass Formeditor extends Component {\n  state = {\n    formObj:this.props.formObj,\n    rmlist:[]\n  };\n\n  handleRemoveObj = (e) => {\n    const objIdx = e.target.id.split(\"_\")[0];\n    var tmpState = this.state;\n    tmpState.rmlist.push(objIdx);\n    this.setState(tmpState);\n  };\n\n  handleResetObj = (e) => {\n    var tmpState = this.state;\n    tmpState.rmlist = [];\n    this.setState(tmpState);\n  };\n\n\n\n\n\n  render() {\n\n\n    var grpList = [];\n    for (var i in this.state.formObj.groups){\n      var grpObj = this.state.formObj.groups[i];\n      grpList[i] = [];\n      for (var j in grpObj.emlist){\n        var obj = grpObj.emlist[j];\n        var emId = obj.emid;\n        var emValue =  obj.value;\n        if (obj.status !== \"inactive\"){\n          var em = getFormElement(emId,obj,this.props.formClass, emValue);\n          grpList[i].push(em);\n        }\n      }\n    }\n        \n    var divList = [];\n    var formTitle = this.state.formObj.title;\n    var formDesc = this.state.formObj.description;\n    if (\"title\" in this.state.formObj){\n          var s = {width:\"100%\", background:\"#fff\", fontWeight:\"bold\"};\n          s = (\"titlestyle\" in this.state.formObj ? this.state.formObj.titlestyle : s);\n          divList.push(<div className=\"leftblock\" style={s}>\n            <Markup content={formTitle}/>\n          </div>);\n    }\n    if (\"description\" in this.state.formObj){\n        var s = {width:\"90%\", marginBottom:\"20px\"};\n        s = (\"descstyle\" in this.state.formObj ? this.state.formObj.descstyle : s);\n        divList.push(<div className=\"leftblock\" style={s}>\n            <Markup content={formDesc}/>\n            </div>);\n    }\n\n    for (var i in grpList){\n        var ttl = \"\";\n        if (\"title\" in this.state.formObj.groups[i]){\n          var s = {color:\"DodgerBlue\", width:\"100%\", margin:\"-5px 0px 10px 0px\", fontStyle:\"italic\"};\n          ttl = (\n            <div className=\"leftblock\" key={\"grp_title_\"+i} style={s}>\n              {this.state.formObj.groups[i].title}\n            </div>\n          );\n        }\n        var s = this.state.formObj.groups[i].style;\n        divList.push(<div id={\"grp_cn_\"+i} key={\"grp_ttl_\"+i} \n          className=\"leftblock\" style={s}> {ttl} {grpList[i]}</div>);\n    }\n      \n    return(<div className=\"leftblock\" style={{width:\"100%\"}}>{divList}</div>);\n  }\n}\n  \n  export default Formeditor;\n","/data/shared/repos/glygen-backend-datasetviewer/app/src/components/dataset_search.jsx",["205","206","207","208"],"import React, { Component } from \"react\";\nimport Searchbox from \"./search_box\";\nimport Filter from \"./filter\";\nimport { filterObjectList} from './util';\nimport * as LocalConfig from \"./local_config\";\nimport Loadingicon from \"./loading_icon\";\nimport Alertdialog from './dialogbox';\nimport $ from \"jquery\";\nimport Tableview from \"./table\";\nimport {getColumns} from \"./columns\";\nimport { Markup } from 'interweave';\n\n\nclass DatasetSearch extends Component {  \n  \n  state = {\n    filterlist: [],\n    objlist:[],\n    statobj:{},\n    pageIdx:1,\n    pageBatchSize:5,\n    pageStartIdx:1,\n    pageEndIdx:5,\n    listid:\"\",\n    isLoaded:false,\n    searchquery:\"\",\n    dialog:{\n      status:false, \n      msg:\"\"\n    }\n  };\n\n  componentDidMount() {\n \n    const queryParameters = new URLSearchParams(window.location.search);\n    const searchquery = queryParameters.get(\"query\");\n    if (searchquery !== null){\n        var tmpState = this.state;\n        tmpState.searchquery = searchquery;\n        this.setState(tmpState);\n        this.handleSearch();\n        return;\n    }\n \n    var reqObj = {}\n    const requestOptions = { \n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_getall;\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n            console.log(\"RRR:\", result);\n            var tmpState = this.state;\n            tmpState.isLoaded = true;          \n            if (result.status === 0){\n                tmpState.dialog.status = true;\n                tmpState.dialog.msg = result.error;\n            }\n            tmpState.objlist = result.recordlist;\n            tmpState.statobj = result.stats;\n            this.setState(tmpState);\n            //console.log(\"Request:\",svcUrl);\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n  }\n\n\n  handleDialogClose = () => {\n    var tmpState = this.state;\n    tmpState.dialog.status = false;\n    this.setState(tmpState);\n  }\n\n  \n  handleKeyPress = (e) => {\n    if(e.key === \"Enter\"){\n      e.preventDefault();\n      this.handleSearch();\n    }\n  }\n \n\n   handleSearch = () => {\n    \n    var queryValue = ($(\"#query\").val() === undefined ? this.state.searchquery : $(\"#query\").val());\n    var reqObj = {query:queryValue};\n\n    var tmpState = this.state;\n    tmpState.isLoaded = false;\n    this.setState(tmpState);\n\n    const requestOptions = { \n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = LocalConfig.apiHash.dataset_search;\n\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          console.log(\"SEARCH RRR\", result);\n          var tmpState = this.state;\n          tmpState.isLoaded = true;          \n          if (result.status === 0){\n            tmpState.dialog.status = true;\n            tmpState.dialog.msg = result.error;\n          }\n          else{\n            //alert(\"/results/\" + result.list_id);\n            window.location.href = \"/results/\" + result.list_id;\n          }\n          this.setState(tmpState);\n          //console.log(\"Request:\",svcUrl);\n          console.log(\"Ajax response:\", result);\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n    }\n\n\n\n    handleFilterReset = () => {\n        $('input[name=\"filtervalue\"]:checkbox:checked').prop(\"checked\", false);\n        this.setState({ filterlist: [] });\n    };\n\n    handleFilterApply = () => {\n        var tmpList = $('input[name=\"filtervalue\"]:checkbox:checked')\n            .map(function () {return $(this).val();}).get(); // <----\n        this.setState({ filterlist: tmpList });\n    };\n\n    handleFilterIcon = () => {\n        $(\".filterboxwrapper\").toggle();\n    };\n\n\n\n\n    render() {\n\n\n        if (this.state.isLoaded === false){\n             return <Loadingicon/>\n        }\n        var filObjOne = filterObjectList(this.state.objlist, this.state.filterlist);\n        var passedObjList = filObjOne.passedobjlist;\n        var passedCount = passedObjList.length;\n        //var filterInfo = filObjOne.filterinfo;\n    \n        var filObjTwo = filterObjectList(passedObjList, []);\n        var filterInfo = filObjTwo.filterinfo;\n            \n        var batchSize = 20;\n        var pageCount = parseInt(passedObjList.length/batchSize) + 1;\n        pageCount = (this.state.objlist.length > 0 ? pageCount : 0);\n\n        var startIdx = batchSize * (parseInt(this.state.pageIdx) - 1) + 1;\n        var endIdx = startIdx + batchSize;\n        endIdx = (endIdx > passedCount ? passedCount : endIdx);\n\n        var filterHideFlag = \"block\";\n\n        var tmpList = [];\n        for (var i in this.state.filterlist){\n            var h = \"<b>\" + this.state.filterlist[i].split(\"|\")[1] + \"</b>\";\n            tmpList.push(h);\n        }\n        var resultSummary = \"\"\n        if (\"total\" in this.state.statobj){\n            resultSummary = \"<b>\" + this.state.statobj.total + \"</b> datasets found\";\n            if (tmpList.length > 0){\n                resultSummary += \", <b>\" + passedObjList.length + \"</b> shown after filters: \";\n                resultSummary += tmpList.join(\"', '\")\n            }\n            resultSummary += \".\";\n        }\n\n        var tableId = \"tableone\";\n        var idField = \"bcoid\";\n        var tableCols = getColumns(tableId);\n        var tableRows = [];\n        for (var i in passedObjList){\n            var obj = passedObjList[i];\n            var o = {};\n            for (var j in tableCols){\n                var f = (tableCols[j][\"field\"] === \"id\" ? idField : tableCols[j][\"field\"])\n                o[tableCols[j][\"field\"]] = obj[f]\n            }\n            o[\"details\"] =  {\"bcoid\":o.id, \"label\":\" ... view details\"}\n            o[\"details\"][\"rowlist\"] = (\"rowlist\" in obj ? obj[\"rowlist\"] : []);\n            tableRows.push(o)\n        }\n\n\n        return (\n            <div>\n                <Alertdialog dialog={this.state.dialog} onClose={this.handleDialogClose}/>\n                <div className=\"searchboxwrapper\">\n                    <Searchbox initObj={this.props.initObj} \n                        searchquery={this.state.searchquery}\n                        onSearch={this.handleSearch} \n                        onKeyPress={this.handleKeyPress}\n                    />\n                </div>\n               \n                <div className=\"material-icons rightblock filtericoncn\" onClick={this.handleFilterIcon}>tune</div>\n                <div className=\"statscn\"> <Markup content={resultSummary}/> </div>\n                <div className=\"filterboxwrapper\">\n                    <Filter\n                        filterinfo={filterInfo}\n                        filterlist={this.state.filterlist}\n                        resultcount={this.state.objlist.length}\n                        resultSummary={resultSummary}\n                        handleFilterApply = {this.handleFilterApply}\n                    />\n                </div>\n                <div className=\"searchresultscn\">\n                    <Tableview cols={tableCols} rows={tableRows}/>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DatasetSearch;\n",{"ruleId":"209","severity":1,"message":"210","line":81,"column":9,"nodeType":"211","messageId":"212","endLine":81,"endColumn":16},{"ruleId":"209","severity":1,"message":"213","line":7,"column":10,"nodeType":"211","messageId":"212","endLine":7,"endColumn":15},{"ruleId":"209","severity":1,"message":"214","line":9,"column":8,"nodeType":"211","messageId":"212","endLine":9,"endColumn":9},{"ruleId":"215","severity":1,"message":"216","line":146,"column":13,"nodeType":"211","messageId":"217","endLine":146,"endColumn":21},{"ruleId":"215","severity":1,"message":"218","line":200,"column":14,"nodeType":"211","messageId":"217","endLine":200,"endColumn":15},{"ruleId":"215","severity":1,"message":"219","line":201,"column":11,"nodeType":"211","messageId":"217","endLine":201,"endColumn":14},{"ruleId":"215","severity":1,"message":"218","line":206,"column":14,"nodeType":"211","messageId":"217","endLine":206,"endColumn":15},{"ruleId":"220","severity":1,"message":"221","line":330,"column":24,"nodeType":"211","messageId":"222","endLine":330,"endColumn":34},{"ruleId":"215","severity":1,"message":"223","line":360,"column":15,"nodeType":"211","messageId":"217","endLine":360,"endColumn":20},{"ruleId":"224","severity":1,"message":"225","line":364,"column":21,"nodeType":"226","endLine":364,"endColumn":42},{"ruleId":"209","severity":1,"message":"227","line":4,"column":8,"nodeType":"211","messageId":"212","endLine":4,"endColumn":17},{"ruleId":"209","severity":1,"message":"228","line":113,"column":9,"nodeType":"211","messageId":"212","endLine":113,"endColumn":20},{"ruleId":"229","severity":1,"message":"230","line":117,"column":56,"nodeType":"231","messageId":"232","endLine":117,"endColumn":57},{"ruleId":"209","severity":1,"message":"227","line":2,"column":8,"nodeType":"211","messageId":"212","endLine":2,"endColumn":17},{"ruleId":"209","severity":1,"message":"233","line":143,"column":9,"nodeType":"211","messageId":"212","endLine":143,"endColumn":18},{"ruleId":"209","severity":1,"message":"234","line":147,"column":9,"nodeType":"211","messageId":"212","endLine":147,"endColumn":15},{"ruleId":"215","severity":1,"message":"218","line":168,"column":18,"nodeType":"211","messageId":"217","endLine":168,"endColumn":19},{"ruleId":"215","severity":1,"message":"216","line":146,"column":13,"nodeType":"211","messageId":"217","endLine":146,"endColumn":21},{"ruleId":"224","severity":1,"message":"225","line":265,"column":21,"nodeType":"226","endLine":265,"endColumn":42},{"ruleId":"235","severity":1,"message":"236","line":53,"column":40,"nodeType":"231","messageId":"237","endLine":53,"endColumn":42},{"ruleId":"209","severity":1,"message":"238","line":2,"column":10,"nodeType":"211","messageId":"212","endLine":2,"endColumn":20},{"ruleId":"215","severity":1,"message":"218","line":20,"column":14,"nodeType":"211","messageId":"217","endLine":20,"endColumn":15},{"ruleId":"224","severity":1,"message":"225","line":22,"column":25,"nodeType":"226","endLine":22,"endColumn":117},{"ruleId":"215","severity":1,"message":"239","line":25,"column":9,"nodeType":"211","messageId":"217","endLine":25,"endColumn":10},{"ruleId":"209","severity":1,"message":"240","line":4,"column":10,"nodeType":"211","messageId":"212","endLine":4,"endColumn":14},{"ruleId":"209","severity":1,"message":"241","line":4,"column":16,"nodeType":"211","messageId":"212","endLine":4,"endColumn":27},{"ruleId":"209","severity":1,"message":"242","line":4,"column":40,"nodeType":"211","messageId":"212","endLine":4,"endColumn":46},{"ruleId":"209","severity":1,"message":"243","line":4,"column":61,"nodeType":"211","messageId":"212","endLine":4,"endColumn":68},{"ruleId":"209","severity":1,"message":"244","line":4,"column":83,"nodeType":"211","messageId":"212","endLine":4,"endColumn":91},{"ruleId":"245","severity":1,"message":"246","line":35,"column":120,"nodeType":"247","messageId":"248","endLine":35,"endColumn":129},{"ruleId":"209","severity":1,"message":"249","line":3,"column":8,"nodeType":"211","messageId":"212","endLine":3,"endColumn":19},{"ruleId":"209","severity":1,"message":"213","line":5,"column":10,"nodeType":"211","messageId":"212","endLine":5,"endColumn":15},{"ruleId":"209","severity":1,"message":"250","line":8,"column":10,"nodeType":"211","messageId":"212","endLine":8,"endColumn":16},{"ruleId":"209","severity":1,"message":"251","line":10,"column":9,"nodeType":"211","messageId":"212","endLine":10,"endColumn":24},{"ruleId":"209","severity":1,"message":"252","line":15,"column":5,"nodeType":"211","messageId":"212","endLine":15,"endColumn":12},{"ruleId":"253","severity":1,"message":"254","line":119,"column":29,"nodeType":"255","messageId":"237","endLine":119,"endColumn":33},{"ruleId":"209","severity":1,"message":"256","line":7,"column":9,"nodeType":"211","messageId":"212","endLine":7,"endColumn":19},{"ruleId":"209","severity":1,"message":"257","line":9,"column":16,"nodeType":"211","messageId":"212","endLine":9,"endColumn":27},{"ruleId":"209","severity":1,"message":"250","line":12,"column":10,"nodeType":"211","messageId":"212","endLine":12,"endColumn":16},{"ruleId":"209","severity":1,"message":"258","line":53,"column":9,"nodeType":"211","messageId":"212","endLine":53,"endColumn":16},{"ruleId":"209","severity":1,"message":"258","line":104,"column":9,"nodeType":"211","messageId":"212","endLine":104,"endColumn":16},{"ruleId":"235","severity":1,"message":"236","line":158,"column":13,"nodeType":"231","messageId":"237","endLine":158,"endColumn":15},{"ruleId":"235","severity":1,"message":"236","line":160,"column":22,"nodeType":"231","messageId":"237","endLine":160,"endColumn":24},{"ruleId":"215","severity":1,"message":"259","line":168,"column":18,"nodeType":"211","messageId":"217","endLine":168,"endColumn":19},{"ruleId":"215","severity":1,"message":"260","line":169,"column":15,"nodeType":"211","messageId":"217","endLine":169,"endColumn":16},{"ruleId":"235","severity":1,"message":"236","line":169,"column":22,"nodeType":"231","messageId":"237","endLine":169,"endColumn":24},{"ruleId":"209","severity":1,"message":"250","line":2,"column":10,"nodeType":"211","messageId":"212","endLine":2,"endColumn":16},{"ruleId":"209","severity":1,"message":"261","line":16,"column":15,"nodeType":"211","messageId":"212","endLine":16,"endColumn":16},{"ruleId":"209","severity":1,"message":"262","line":56,"column":9,"nodeType":"211","messageId":"212","endLine":56,"endColumn":18},{"ruleId":"209","severity":1,"message":"263","line":57,"column":9,"nodeType":"211","messageId":"212","endLine":57,"endColumn":17},{"ruleId":"209","severity":1,"message":"264","line":2,"column":10,"nodeType":"211","messageId":"212","endLine":2,"endColumn":14},{"ruleId":"209","severity":1,"message":"265","line":4,"column":8,"nodeType":"211","messageId":"212","endLine":4,"endColumn":18},{"ruleId":"209","severity":1,"message":"266","line":5,"column":20,"nodeType":"211","messageId":"212","endLine":5,"endColumn":30},{"ruleId":"209","severity":1,"message":"267","line":5,"column":32,"nodeType":"211","messageId":"212","endLine":5,"endColumn":53},{"ruleId":"209","severity":1,"message":"214","line":1,"column":8,"nodeType":"211","messageId":"212","endLine":1,"endColumn":9},{"ruleId":"224","severity":1,"message":"225","line":161,"column":9,"nodeType":"226","endLine":161,"endColumn":76},{"ruleId":"215","severity":1,"message":"218","line":221,"column":14,"nodeType":"211","messageId":"217","endLine":221,"endColumn":15},{"ruleId":"215","severity":1,"message":"268","line":222,"column":13,"nodeType":"211","messageId":"217","endLine":222,"endColumn":17},{"ruleId":"269","severity":1,"message":"270","line":237,"column":46,"nodeType":"211","messageId":"271","endLine":237,"endColumn":47},{"ruleId":"215","severity":1,"message":"259","line":242,"column":14,"nodeType":"211","messageId":"217","endLine":242,"endColumn":15},{"ruleId":"269","severity":1,"message":"270","line":244,"column":50,"nodeType":"211","messageId":"271","endLine":244,"endColumn":51},{"ruleId":"269","severity":1,"message":"270","line":250,"column":19,"nodeType":"211","messageId":"271","endLine":250,"endColumn":20},{"ruleId":"215","severity":1,"message":"272","line":283,"column":9,"nodeType":"211","messageId":"217","endLine":283,"endColumn":11},{"ruleId":"209","severity":1,"message":"273","line":364,"column":9,"nodeType":"211","messageId":"212","endLine":364,"endColumn":15},{"ruleId":"215","severity":1,"message":"274","line":391,"column":9,"nodeType":"211","messageId":"217","endLine":391,"endColumn":14},{"ruleId":"215","severity":1,"message":"275","line":392,"column":9,"nodeType":"211","messageId":"217","endLine":392,"endColumn":14},{"ruleId":"215","severity":1,"message":"276","line":425,"column":11,"nodeType":"211","messageId":"217","endLine":425,"endColumn":19},{"ruleId":"215","severity":1,"message":"277","line":431,"column":15,"nodeType":"211","messageId":"217","endLine":431,"endColumn":26},{"ruleId":"215","severity":1,"message":"218","line":460,"column":16,"nodeType":"211","messageId":"217","endLine":460,"endColumn":17},{"ruleId":"215","severity":1,"message":"277","line":463,"column":13,"nodeType":"211","messageId":"217","endLine":463,"endColumn":24},{"ruleId":"215","severity":1,"message":"259","line":466,"column":20,"nodeType":"211","messageId":"217","endLine":466,"endColumn":21},{"ruleId":"215","severity":1,"message":"276","line":475,"column":11,"nodeType":"211","messageId":"217","endLine":475,"endColumn":19},{"ruleId":"215","severity":1,"message":"278","line":478,"column":13,"nodeType":"211","messageId":"217","endLine":478,"endColumn":26},{"ruleId":"215","severity":1,"message":"279","line":479,"column":13,"nodeType":"211","messageId":"217","endLine":479,"endColumn":25},{"ruleId":"215","severity":1,"message":"277","line":480,"column":13,"nodeType":"211","messageId":"217","endLine":480,"endColumn":24},{"ruleId":"215","severity":1,"message":"280","line":481,"column":13,"nodeType":"211","messageId":"217","endLine":481,"endColumn":27},{"ruleId":"215","severity":1,"message":"281","line":487,"column":13,"nodeType":"211","messageId":"217","endLine":487,"endColumn":18},{"ruleId":"215","severity":1,"message":"282","line":497,"column":15,"nodeType":"211","messageId":"217","endLine":497,"endColumn":22},{"ruleId":"215","severity":1,"message":"278","line":498,"column":15,"nodeType":"211","messageId":"217","endLine":498,"endColumn":28},{"ruleId":"215","severity":1,"message":"277","line":499,"column":15,"nodeType":"211","messageId":"217","endLine":499,"endColumn":26},{"ruleId":"215","severity":1,"message":"283","line":501,"column":15,"nodeType":"211","messageId":"217","endLine":501,"endColumn":28},{"ruleId":"215","severity":1,"message":"281","line":511,"column":17,"nodeType":"211","messageId":"217","endLine":511,"endColumn":22},{"ruleId":"209","severity":1,"message":"284","line":518,"column":13,"nodeType":"211","messageId":"212","endLine":518,"endColumn":17},{"ruleId":"215","severity":1,"message":"274","line":526,"column":13,"nodeType":"211","messageId":"217","endLine":526,"endColumn":18},{"ruleId":"215","severity":1,"message":"275","line":527,"column":13,"nodeType":"211","messageId":"217","endLine":527,"endColumn":18},{"ruleId":"215","severity":1,"message":"274","line":540,"column":11,"nodeType":"211","messageId":"217","endLine":540,"endColumn":16},{"ruleId":"215","severity":1,"message":"275","line":541,"column":11,"nodeType":"211","messageId":"217","endLine":541,"endColumn":16},{"ruleId":"209","severity":1,"message":"214","line":4,"column":8,"nodeType":"211","messageId":"212","endLine":4,"endColumn":9},{"ruleId":"215","severity":1,"message":"239","line":59,"column":13,"nodeType":"211","messageId":"217","endLine":59,"endColumn":14},{"ruleId":"215","severity":1,"message":"218","line":66,"column":14,"nodeType":"211","messageId":"217","endLine":66,"endColumn":15},{"ruleId":"215","severity":1,"message":"239","line":69,"column":15,"nodeType":"211","messageId":"217","endLine":69,"endColumn":16},{"ruleId":"215","severity":1,"message":"239","line":76,"column":13,"nodeType":"211","messageId":"217","endLine":76,"endColumn":14},{"ruleId":"209","severity":1,"message":"233","line":173,"column":9,"nodeType":"211","messageId":"212","endLine":173,"endColumn":18},{"ruleId":"209","severity":1,"message":"234","line":177,"column":9,"nodeType":"211","messageId":"212","endLine":177,"endColumn":15},{"ruleId":"209","severity":1,"message":"285","line":179,"column":13,"nodeType":"211","messageId":"212","endLine":179,"endColumn":27},{"ruleId":"215","severity":1,"message":"218","line":200,"column":18,"nodeType":"211","messageId":"217","endLine":200,"endColumn":19},"no-unused-vars","'app_ver' is assigned a value but never used.","Identifier","unusedVar","'Chart' is defined but never used.","'$' is defined but never used.","no-redeclare","'tmpState' is already defined.","redeclared","'i' is already defined.","'obj' is already defined.","no-use-before-define","'affOptions' was used before it was defined.","usedBeforeDefined","'tmpCn' is already defined.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'Searchbox' is defined but never used.","'selectedVer' is assigned a value but never used.","no-useless-concat","Unexpected string concatenation of literals.","BinaryExpression","unexpectedConcat","'pageCount' is assigned a value but never used.","'endIdx' is assigned a value but never used.","eqeqeq","Expected '===' and instead saw '=='.","unexpected","'SocialIcon' is defined but never used.","'s' is already defined.","'Form' is defined but never used.","'FormControl' is defined but never used.","'Button' is defined but never used.","'NavItem' is defined but never used.","'MenuItem' is defined but never used.","react/jsx-no-duplicate-props","No duplicate props allowed","JSXAttribute","noDuplicateProps","'Loadingicon' is defined but never used.","'Markup' is defined but never used.","'sortReleaseList' is defined but never used.","'verInfo' is assigned a value but never used.","no-eval","eval can be harmful.","CallExpression","'getColumns' is defined but never used.","'useLocation' is defined but never used.","'rowList' is assigned a value but never used.","'j' is already defined.","'f' is already defined.","'x' is assigned a value but never used.","'iconStyle' is assigned a value but never used.","'msgStyle' is assigned a value but never used.","'Link' is defined but never used.","'Typography' is defined but never used.","'GridColDef' is defined but never used.","'GridValueGetterParams' is defined but never used.","'ordr' is already defined.","react/style-prop-object","Style prop value must be an object","stylePropNotObject","'em' is already defined.","'sThree' is assigned a value but never used.","'divId' is already defined.","'btnId' is already defined.","'spanList' is already defined.","'childPathId' is already defined.","'childPropName' is already defined.","'childFormObj' is already defined.","'childPropValue' is already defined.","'tmpEm' is already defined.","'randStr' is already defined.","'childPropType' is already defined.","'sTwo' is assigned a value but never used.","'filterHideFlag' is assigned a value but never used."]